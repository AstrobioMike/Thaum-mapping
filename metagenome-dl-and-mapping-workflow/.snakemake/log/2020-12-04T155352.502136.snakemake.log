Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	4	dl_454_sample_and_run_mapping
	28	dl_HK_sample_and_run_mapping
	90	dl_illumina_sample_and_run_mapping
	12	parse_454_gene_level_cov_and_det
	219	parse_gene_level_cov_and_det
	45	parse_gene_level_cov_and_det_HK_samples
	399

[Fri Dec  4 15:53:53 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_168_10-100m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-coverages.tsv
    jobid: 725
    wildcards: ID=TARA_168_10-100m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_168_10-100m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_168_10-100m_0.22-3_prok-gene-cov.tmp
        

[Fri Dec  4 15:53:53 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD150.bam
    jobid: 45
    wildcards: ID=OSD150


        curr_run_accs=$(grep -w -m 1 "^OSD150" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD150 ${curr_run_accs}
        

[Fri Dec  4 15:53:53 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD163.bam
    jobid: 59
    wildcards: ID=OSD163


        curr_run_accs=$(grep -w -m 1 "^OSD163" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD163 ${curr_run_accs}
        

[Fri Dec  4 15:53:53 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_068_5m_0.45-0.8_girus.bam
    jobid: 213
    wildcards: ID=TARA_068_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_068_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_068_5m_0.45-0.8_girus ${curr_run_accs}
        

[Fri Dec  4 15:53:53 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_093_5m_0.22-3_prok.bam
    jobid: 241
    wildcards: ID=TARA_093_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_093_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_093_5m_0.22-3_prok ${curr_run_accs}
        

[Fri Dec  4 15:53:53 2020]
rule dl_454_sample_and_run_mapping:
    input: ../mapping-files-pyro/all-combined.1.bt2, ../mapping-files-pyro/all-combined.2.bt2, ../mapping-files-pyro/all-combined.3.bt2, ../mapping-files-pyro/all-combined.4.bt2, ../mapping-files-pyro/all-combined.rev.1.bt2, ../mapping-files-pyro/all-combined.rev.2.bt2
    output: ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus.bam
    jobid: 353
    wildcards: ID=TARA_043_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_043_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-454-sample.sh ../mapping-files-pyro ../mapping-files-pyro/all-combined 4 TARA_043_5m_0.22-1.6_girus ${curr_run_accs}
        

[Fri Dec  4 15:53:53 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A5-10-3500m-34An.bam
    jobid: 367
    wildcards: ID=A5-10-3500m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A5-10-3500m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A5-10-3500m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A5-10-3500m-34An "${R1_link}" "${R2_link}"
        

[Fri Dec  4 15:53:53 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD106-0.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD106-0-gene-coverages.tsv
    jobid: 423
    wildcards: ID=OSD106-0


        pileup.sh -in ../mapping-files/OSD106-0.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD106-0-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD106-0-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD106-0-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD106-0-gene-cov.tmp > ../mapping-files/OSD106-0-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD106-0-gene-cov-and-det.tmp ../mapping-files/OSD106-0-gene-cov.tmp
        
[Fri Dec  4 15:53:56 2020]
Finished job 423.
1 of 399 steps (0.25%) done

[Fri Dec  4 15:53:56 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_120m_0.45-0.8_girus.bam
    jobid: 234
    wildcards: ID=TARA_078_120m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_078_120m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_120m_0.45-0.8_girus ${curr_run_accs}
        
[Fri Dec  4 15:53:58 2020]
Finished job 725.
2 of 399 steps (0.50%) done

[Fri Dec  4 15:53:58 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A4-07-0m-34An.bam
    jobid: 360
    wildcards: ID=A4-07-0m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A4-07-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A4-07-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A4-07-0m-34An "${R1_link}" "${R2_link}"
        
[Fri Dec  4 15:54:27 2020]
Finished job 45.
3 of 399 steps (0.75%) done

[Fri Dec  4 15:54:27 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_030_5m_0.22-1.6_prok.bam
    jobid: 164
    wildcards: ID=TARA_030_5m_0.22-1.6_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_030_5m_0.22-1.6_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_030_5m_0.22-1.6_prok ${curr_run_accs}
        
[Fri Dec  4 15:54:56 2020]
Finished job 353.
4 of 399 steps (1%) done

[Fri Dec  4 15:54:56 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD155.bam
    jobid: 52
    wildcards: ID=OSD155


        curr_run_accs=$(grep -w -m 1 "^OSD155" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD155 ${curr_run_accs}
        
[Fri Dec  4 15:54:57 2020]
Finished job 59.
5 of 399 steps (1%) done

[Fri Dec  4 15:54:57 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD143.bam
    jobid: 38
    wildcards: ID=OSD143


        curr_run_accs=$(grep -w -m 1 "^OSD143" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD143 ${curr_run_accs}
        
[Fri Dec  4 15:55:38 2020]
Finished job 38.
6 of 399 steps (2%) done

[Fri Dec  4 15:55:38 2020]
rule parse_454_gene_level_cov_and_det:
    input: ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-coverages.tsv
    jobid: 767
    wildcards: ID=TARA_043_5m_0.22-1.6_girus


        pileup.sh -in ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-cov.tmp > ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-cov-and-det.tmp ../mapping-files-pyro/TARA_043_5m_0.22-1.6_girus-gene-cov.tmp
        
[Fri Dec  4 15:55:41 2020]
Finished job 767.
7 of 399 steps (2%) done

[Fri Dec  4 15:55:41 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD21.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD21-gene-coverages.tsv
    jobid: 500
    wildcards: ID=OSD21


        pileup.sh -in ../mapping-files/OSD21.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD21-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD21-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD21-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD21-gene-cov.tmp > ../mapping-files/OSD21-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD21-gene-cov-and-det.tmp ../mapping-files/OSD21-gene-cov.tmp
        
[Fri Dec  4 15:55:44 2020]
Finished job 500.
8 of 399 steps (2%) done

[Fri Dec  4 15:55:44 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD53.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD53-gene-coverages.tsv
    jobid: 528
    wildcards: ID=OSD53


        pileup.sh -in ../mapping-files/OSD53.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD53-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD53-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD53-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD53-gene-cov.tmp > ../mapping-files/OSD53-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD53-gene-cov-and-det.tmp ../mapping-files/OSD53-gene-cov.tmp
        
[Fri Dec  4 15:55:47 2020]
Finished job 528.
9 of 399 steps (2%) done

[Fri Dec  4 15:55:47 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/LB01-300m-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/LB01-300m-8Ar-gene-coverages.tsv
    jobid: 800
    wildcards: ID=LB01-300m-8Ar


        pileup.sh -in ../mapping-files-HK/LB01-300m-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/LB01-300m-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/LB01-300m-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/LB01-300m-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/LB01-300m-8Ar-gene-cov.tmp > ../mapping-files-HK/LB01-300m-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/LB01-300m-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/LB01-300m-8Ar-gene-cov.tmp
        
[Fri Dec  4 15:55:52 2020]
Finished job 800.
10 of 399 steps (3%) done

[Fri Dec  4 15:55:52 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD69.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD69-gene-coverages.tsv
    jobid: 542
    wildcards: ID=OSD69


        pileup.sh -in ../mapping-files/OSD69.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD69-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD69-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD69-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD69-gene-cov.tmp > ../mapping-files/OSD69-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD69-gene-cov-and-det.tmp ../mapping-files/OSD69-gene-cov.tmp
        
[Fri Dec  4 15:55:55 2020]
Finished job 542.
11 of 399 steps (3%) done

[Fri Dec  4 15:55:55 2020]
rule parse_454_gene_level_cov_and_det:
    input: ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-coverages.tsv
    jobid: 765
    wildcards: ID=TARA_039_270m_0.22-1.6_girus


        pileup.sh -in ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-cov.tmp > ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-cov-and-det.tmp ../mapping-files-pyro/TARA_039_270m_0.22-1.6_girus-gene-cov.tmp
        
[Fri Dec  4 15:55:58 2020]
Finished job 765.
12 of 399 steps (3%) done

[Fri Dec  4 15:55:58 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD90.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD90-gene-coverages.tsv
    jobid: 556
    wildcards: ID=OSD90


        pileup.sh -in ../mapping-files/OSD90.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD90-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD90-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD90-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD90-gene-cov.tmp > ../mapping-files/OSD90-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD90-gene-cov-and-det.tmp ../mapping-files/OSD90-gene-cov.tmp
        
[Fri Dec  4 15:56:01 2020]
Finished job 556.
13 of 399 steps (3%) done

[Fri Dec  4 15:56:01 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_163_499m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_163_499m_0.22-3_prok-gene-coverages.tsv
    jobid: 723
    wildcards: ID=TARA_163_499m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_163_499m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_163_499m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 15:56:11 2020]
Finished job 723.
14 of 399 steps (4%) done

[Fri Dec  4 15:56:11 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_009_55m_0.22-1.6_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-coverages.tsv
    jobid: 570
    wildcards: ID=TARA_009_55m_0.22-1.6_girus


        pileup.sh -in ../mapping-files/TARA_009_55m_0.22-1.6_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-cov.tmp > ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-cov-and-det.tmp ../mapping-files/TARA_009_55m_0.22-1.6_girus-gene-cov.tmp
        
[Fri Dec  4 15:56:20 2020]
Finished job 570.
15 of 399 steps (4%) done

[Fri Dec  4 15:56:20 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/UW050-0m-34An.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/UW050-0m-34An-gene-coverages.tsv
    jobid: 824
    wildcards: ID=UW050-0m-34An


        pileup.sh -in ../mapping-files-HK/UW050-0m-34An.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/UW050-0m-34An-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/UW050-0m-34An-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/UW050-0m-34An-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/UW050-0m-34An-gene-cov.tmp > ../mapping-files-HK/UW050-0m-34An-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/UW050-0m-34An-gene-cov-and-det.tmp ../mapping-files-HK/UW050-0m-34An-gene-cov.tmp
        
[Fri Dec  4 15:56:23 2020]
Finished job 52.
16 of 399 steps (4%) done

[Fri Dec  4 15:56:23 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD155.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD155-gene-coverages.tsv
    jobid: 466
    wildcards: ID=OSD155


        pileup.sh -in ../mapping-files/OSD155.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD155-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD155-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD155-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD155-gene-cov.tmp > ../mapping-files/OSD155-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD155-gene-cov-and-det.tmp ../mapping-files/OSD155-gene-cov.tmp
        
[Fri Dec  4 15:56:24 2020]
Finished job 824.
17 of 399 steps (4%) done

[Fri Dec  4 15:56:24 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_5m_0.22-0.45_girus.bam
    jobid: 235
    wildcards: ID=TARA_078_5m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_078_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_5m_0.22-0.45_girus ${curr_run_accs}
        
[Fri Dec  4 15:56:26 2020]
Finished job 466.
18 of 399 steps (5%) done

[Fri Dec  4 15:56:26 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_076_150m_0.22-0.45_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-coverages.tsv
    jobid: 639
    wildcards: ID=TARA_076_150m_0.22-0.45_girus


        pileup.sh -in ../mapping-files/TARA_076_150m_0.22-0.45_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-cov.tmp > ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-cov-and-det.tmp ../mapping-files/TARA_076_150m_0.22-0.45_girus-gene-cov.tmp
        
[Fri Dec  4 15:56:40 2020]
Finished job 639.
19 of 399 steps (5%) done

[Fri Dec  4 15:56:40 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD144.bam
    jobid: 39
    wildcards: ID=OSD144


        curr_run_accs=$(grep -w -m 1 "^OSD144" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD144 ${curr_run_accs}
        
[Fri Dec  4 15:57:28 2020]
Finished job 39.
20 of 399 steps (5%) done

[Fri Dec  4 15:57:28 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_068_5m_0.22-0.45_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-coverages.tsv
    jobid: 625
    wildcards: ID=TARA_068_5m_0.22-0.45_girus


        pileup.sh -in ../mapping-files/TARA_068_5m_0.22-0.45_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-cov.tmp > ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-cov-and-det.tmp ../mapping-files/TARA_068_5m_0.22-0.45_girus-gene-cov.tmp
        
[Fri Dec  4 15:57:39 2020]
Finished job 625.
21 of 399 steps (5%) done

[Fri Dec  4 15:57:39 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD65.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD65-gene-coverages.tsv
    jobid: 541
    wildcards: ID=OSD65


        pileup.sh -in ../mapping-files/OSD65.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD65-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD65-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD65-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD65-gene-cov.tmp > ../mapping-files/OSD65-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD65-gene-cov-and-det.tmp ../mapping-files/OSD65-gene-cov.tmp
        
[Fri Dec  4 15:57:43 2020]
Finished job 541.
22 of 399 steps (6%) done

[Fri Dec  4 15:57:43 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD15-50.bam
    jobid: 53
    wildcards: ID=OSD15-50


        curr_run_accs=$(grep -w -m 1 "^OSD15-50" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD15-50 ${curr_run_accs}
        
[Fri Dec  4 15:58:40 2020]
Finished job 53.
23 of 399 steps (6%) done

[Fri Dec  4 15:58:40 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A4-07-1000m-34An.bam
    jobid: 361
    wildcards: ID=A4-07-1000m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A4-07-1000m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A4-07-1000m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A4-07-1000m-34An "${R1_link}" "${R2_link}"
        
[Fri Dec  4 16:31:46 2020]
Finished job 360.
24 of 399 steps (6%) done

[Fri Dec  4 16:31:46 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD52.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD52-gene-coverages.tsv
    jobid: 527
    wildcards: ID=OSD52


        pileup.sh -in ../mapping-files/OSD52.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD52-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD52-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD52-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD52-gene-cov.tmp > ../mapping-files/OSD52-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD52-gene-cov-and-det.tmp ../mapping-files/OSD52-gene-cov.tmp
        
[Fri Dec  4 16:31:53 2020]
Finished job 527.
25 of 399 steps (6%) done

[Fri Dec  4 16:31:53 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A3-09-3500m-34An.bam
    jobid: 359
    wildcards: ID=A3-09-3500m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A3-09-3500m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A3-09-3500m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A3-09-3500m-34An "${R1_link}" "${R2_link}"
        
[Fri Dec  4 17:06:39 2020]
Finished job 361.
26 of 399 steps (7%) done

[Fri Dec  4 17:06:39 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD22.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD22-gene-coverages.tsv
    jobid: 501
    wildcards: ID=OSD22


        pileup.sh -in ../mapping-files/OSD22.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD22-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD22-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD22-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD22-gene-cov.tmp > ../mapping-files/OSD22-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD22-gene-cov-and-det.tmp ../mapping-files/OSD22-gene-cov.tmp
        
[Fri Dec  4 17:06:45 2020]
Finished job 501.
27 of 399 steps (7%) done

[Fri Dec  4 17:06:45 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD7.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD7-gene-coverages.tsv
    jobid: 543
    wildcards: ID=OSD7


        pileup.sh -in ../mapping-files/OSD7.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD7-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD7-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD7-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD7-gene-cov.tmp > ../mapping-files/OSD7-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD7-gene-cov-and-det.tmp ../mapping-files/OSD7-gene-cov.tmp
        
[Fri Dec  4 17:06:50 2020]
Finished job 543.
28 of 399 steps (7%) done

[Fri Dec  4 17:06:50 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD91.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD91-gene-coverages.tsv
    jobid: 557
    wildcards: ID=OSD91


        pileup.sh -in ../mapping-files/OSD91.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD91-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD91-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD91-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD91-gene-cov.tmp > ../mapping-files/OSD91-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD91-gene-cov-and-det.tmp ../mapping-files/OSD91-gene-cov.tmp
        
[Fri Dec  4 17:06:54 2020]
Finished job 557.
29 of 399 steps (7%) done

[Fri Dec  4 17:06:54 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_009_5m_0.22-1.6_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-coverages.tsv
    jobid: 571
    wildcards: ID=TARA_009_5m_0.22-1.6_girus


        pileup.sh -in ../mapping-files/TARA_009_5m_0.22-1.6_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-cov.tmp > ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-cov-and-det.tmp ../mapping-files/TARA_009_5m_0.22-1.6_girus-gene-cov.tmp
        
[Fri Dec  4 17:06:59 2020]
Finished job 571.
30 of 399 steps (8%) done

[Fri Dec  4 17:06:59 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_155_40m_0.22-3_prok.bam
    jobid: 303
    wildcards: ID=TARA_155_40m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_155_40m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_155_40m_0.22-3_prok ${curr_run_accs}
        
[Fri Dec  4 17:20:37 2020]
Finished job 359.
31 of 399 steps (8%) done

[Fri Dec  4 17:20:38 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_076_150m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 641
    wildcards: ID=TARA_076_150m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_076_150m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_076_150m_0.45-0.8_girus-gene-cov.tmp
        
[Fri Dec  4 17:20:49 2020]
Finished job 641.
32 of 399 steps (8%) done

[Fri Dec  4 17:20:49 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_163_5m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_163_5m_0.22-3_prok-gene-coverages.tsv
    jobid: 724
    wildcards: ID=TARA_163_5m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_163_5m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_163_5m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 17:20:57 2020]
Finished job 724.
33 of 399 steps (8%) done

[Fri Dec  4 17:20:57 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_120m_0.22-3_prok.bam
    jobid: 233
    wildcards: ID=TARA_078_120m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_078_120m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_120m_0.22-3_prok ${curr_run_accs}
        
[Fri Dec  4 17:51:40 2020]
Finished job 241.
34 of 399 steps (9%) done

[Fri Dec  4 17:51:40 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_093_5m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_093_5m_0.22-3_prok-gene-coverages.tsv
    jobid: 655
    wildcards: ID=TARA_093_5m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_093_5m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_093_5m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_093_5m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_093_5m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_093_5m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_093_5m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_093_5m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_093_5m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 17:51:48 2020]
Finished job 655.
35 of 399 steps (9%) done

[Fri Dec  4 17:51:48 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_175_10-100m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-coverages.tsv
    jobid: 730
    wildcards: ID=TARA_175_10-100m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_175_10-100m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_175_10-100m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 17:51:59 2020]
Finished job 730.
36 of 399 steps (9%) done

[Fri Dec  4 17:51:59 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_125_140m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 691
    wildcards: ID=TARA_125_140m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_125_140m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_125_140m_0.45-0.8_girus-gene-cov.tmp
        
[Fri Dec  4 17:52:06 2020]
Finished job 691.
37 of 399 steps (9%) done

[Fri Dec  4 17:52:06 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_178_5m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_178_5m_0.22-3_prok-gene-coverages.tsv
    jobid: 733
    wildcards: ID=TARA_178_5m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_178_5m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_178_5m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_178_5m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_178_5m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_178_5m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_178_5m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_178_5m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_178_5m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 17:52:13 2020]
Finished job 733.
38 of 399 steps (10%) done

[Fri Dec  4 17:52:13 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/UW012-0m-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/UW012-0m-8Ar-gene-coverages.tsv
    jobid: 817
    wildcards: ID=UW012-0m-8Ar


        pileup.sh -in ../mapping-files-HK/UW012-0m-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/UW012-0m-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/UW012-0m-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/UW012-0m-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/UW012-0m-8Ar-gene-cov.tmp > ../mapping-files-HK/UW012-0m-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/UW012-0m-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/UW012-0m-8Ar-gene-cov.tmp
        
[Fri Dec  4 17:52:19 2020]
Finished job 817.
39 of 399 steps (10%) done

[Fri Dec  4 17:52:19 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD117.bam
    jobid: 20
    wildcards: ID=OSD117


        curr_run_accs=$(grep -w -m 1 "^OSD117" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD117 ${curr_run_accs}
        
[Fri Dec  4 17:53:12 2020]
Finished job 20.
40 of 399 steps (10%) done

[Fri Dec  4 17:53:13 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD166.bam
    jobid: 62
    wildcards: ID=OSD166


        curr_run_accs=$(grep -w -m 1 "^OSD166" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD166 ${curr_run_accs}
        
[Fri Dec  4 17:55:15 2020]
Finished job 62.
41 of 399 steps (10%) done

[Fri Dec  4 17:55:15 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_048_5m_0.22-1.6_prok.bam
    jobid: 188
    wildcards: ID=TARA_048_5m_0.22-1.6_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_048_5m_0.22-1.6_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_048_5m_0.22-1.6_prok ${curr_run_accs}
        
[Fri Dec  4 18:19:15 2020]
Finished job 367.
42 of 399 steps (11%) done

[Fri Dec  4 18:19:15 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_098_188m_0.22-3_prok.bam
    jobid: 244
    wildcards: ID=TARA_098_188m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_098_188m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_098_188m_0.22-3_prok ${curr_run_accs}
        
[Fri Dec  4 18:30:06 2020]
Finished job 234.
43 of 399 steps (11%) done

[Fri Dec  4 18:30:06 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/AT04-3000m-8Ar.bam
    jobid: 370
    wildcards: ID=AT04-3000m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^AT04-3000m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^AT04-3000m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 AT04-3000m-8Ar "${R1_link}" "${R2_link}"
        
[Fri Dec  4 18:36:01 2020]
Finished job 235.
44 of 399 steps (11%) done

[Fri Dec  4 18:36:01 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_123_150m_0.1-0.22_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-coverages.tsv
    jobid: 678
    wildcards: ID=TARA_123_150m_0.1-0.22_girus


        pileup.sh -in ../mapping-files/TARA_123_150m_0.1-0.22_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-cov.tmp > ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-cov-and-det.tmp ../mapping-files/TARA_123_150m_0.1-0.22_girus-gene-cov.tmp
        
[Fri Dec  4 18:36:10 2020]
Finished job 678.
45 of 399 steps (11%) done

[Fri Dec  4 18:36:10 2020]
rule dl_454_sample_and_run_mapping:
    input: ../mapping-files-pyro/all-combined.1.bt2, ../mapping-files-pyro/all-combined.2.bt2, ../mapping-files-pyro/all-combined.3.bt2, ../mapping-files-pyro/all-combined.4.bt2, ../mapping-files-pyro/all-combined.rev.1.bt2, ../mapping-files-pyro/all-combined.rev.2.bt2
    output: ../mapping-files-pyro/TARA_036_5m_0.22-1.6_girus.bam
    jobid: 348
    wildcards: ID=TARA_036_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_036_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-454-sample.sh ../mapping-files-pyro ../mapping-files-pyro/all-combined 4 TARA_036_5m_0.22-1.6_girus ${curr_run_accs}
        
[Fri Dec  4 18:38:49 2020]
Finished job 348.
46 of 399 steps (12%) done

[Fri Dec  4 18:38:49 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_5m_0.45-0.8_girus.bam
    jobid: 236
    wildcards: ID=TARA_078_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_078_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_5m_0.45-0.8_girus ${curr_run_accs}
        
[Fri Dec  4 18:55:14 2020]
Finished job 213.
47 of 399 steps (12%) done

[Fri Dec  4 18:55:14 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD156.bam
    jobid: 54
    wildcards: ID=OSD156


        curr_run_accs=$(grep -w -m 1 "^OSD156" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD156 ${curr_run_accs}
        
[Fri Dec  4 18:59:30 2020]
Finished job 54.
48 of 399 steps (12%) done

[Fri Dec  4 18:59:30 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD145.bam
    jobid: 40
    wildcards: ID=OSD145


        curr_run_accs=$(grep -w -m 1 "^OSD145" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD145 ${curr_run_accs}
        
[Fri Dec  4 19:02:07 2020]
Finished job 40.
49 of 399 steps (12%) done

[Fri Dec  4 19:02:08 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_068_5m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 627
    wildcards: ID=TARA_068_5m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_068_5m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_068_5m_0.45-0.8_girus-gene-cov.tmp
        
[Fri Dec  4 19:02:26 2020]
Finished job 627.
50 of 399 steps (13%) done

[Fri Dec  4 19:02:26 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A4-07-3000m-34An.bam
    jobid: 362
    wildcards: ID=A4-07-3000m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A4-07-3000m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A4-07-3000m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A4-07-3000m-34An "${R1_link}" "${R2_link}"
        
[Fri Dec  4 19:02:30 2020]
Finished job 362.
51 of 399 steps (13%) done

[Fri Dec  4 19:02:30 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD177.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD177-gene-coverages.tsv
    jobid: 488
    wildcards: ID=OSD177


        pileup.sh -in ../mapping-files/OSD177.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD177-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD177-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD177-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD177-gene-cov.tmp > ../mapping-files/OSD177-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD177-gene-cov-and-det.tmp ../mapping-files/OSD177-gene-cov.tmp
        
[Fri Dec  4 19:02:36 2020]
Finished job 488.
52 of 399 steps (13%) done

[Fri Dec  4 19:02:36 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_070_800m_0.22-0.45_girus.bam
    jobid: 219
    wildcards: ID=TARA_070_800m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_070_800m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_070_800m_0.22-0.45_girus ${curr_run_accs}
        
[Fri Dec  4 19:18:14 2020]
Finished job 370.
53 of 399 steps (13%) done

[Fri Dec  4 19:18:14 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_125_140m_0.1-0.22_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-coverages.tsv
    jobid: 689
    wildcards: ID=TARA_125_140m_0.1-0.22_girus


        pileup.sh -in ../mapping-files/TARA_125_140m_0.1-0.22_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-cov.tmp > ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-cov-and-det.tmp ../mapping-files/TARA_125_140m_0.1-0.22_girus-gene-cov.tmp
        
[Fri Dec  4 19:18:21 2020]
Finished job 689.
54 of 399 steps (14%) done

[Fri Dec  4 19:18:21 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD24.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD24-gene-coverages.tsv
    jobid: 502
    wildcards: ID=OSD24


        pileup.sh -in ../mapping-files/OSD24.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD24-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD24-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD24-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD24-gene-cov.tmp > ../mapping-files/OSD24-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD24-gene-cov-and-det.tmp ../mapping-files/OSD24-gene-cov.tmp
        
[Fri Dec  4 19:18:27 2020]
Finished job 502.
55 of 399 steps (14%) done

[Fri Dec  4 19:18:27 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_158_651m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_158_651m_0.22-3_prok-gene-coverages.tsv
    jobid: 722
    wildcards: ID=TARA_158_651m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_158_651m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_158_651m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_158_651m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_158_651m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_158_651m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_158_651m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_158_651m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_158_651m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 19:18:54 2020]
Finished job 722.
56 of 399 steps (14%) done

[Fri Dec  4 19:18:54 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD70.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD70-gene-coverages.tsv
    jobid: 544
    wildcards: ID=OSD70


        pileup.sh -in ../mapping-files/OSD70.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD70-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD70-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD70-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD70-gene-cov.tmp > ../mapping-files/OSD70-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD70-gene-cov-and-det.tmp ../mapping-files/OSD70-gene-cov.tmp
        
[Fri Dec  4 19:19:02 2020]
Finished job 544.
57 of 399 steps (14%) done
[Fri Dec  4 19:19:02 2020]
Finished job 303.
58 of 399 steps (15%) done

[Fri Dec  4 19:19:02 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_125_5m_0.22-0.45_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-coverages.tsv
    jobid: 693
    wildcards: ID=TARA_125_5m_0.22-0.45_girus


        pileup.sh -in ../mapping-files/TARA_125_5m_0.22-0.45_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-cov.tmp > ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-cov-and-det.tmp ../mapping-files/TARA_125_5m_0.22-0.45_girus-gene-cov.tmp
        

[Fri Dec  4 19:19:02 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD3.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD3-gene-coverages.tsv
    jobid: 507
    wildcards: ID=OSD3


        pileup.sh -in ../mapping-files/OSD3.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD3-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD3-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD3-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD3-gene-cov.tmp > ../mapping-files/OSD3-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD3-gene-cov-and-det.tmp ../mapping-files/OSD3-gene-cov.tmp
        
[Fri Dec  4 19:19:07 2020]
Finished job 507.
59 of 399 steps (15%) done

[Fri Dec  4 19:19:07 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_018_5m_0.22-1.6_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-coverages.tsv
    jobid: 572
    wildcards: ID=TARA_018_5m_0.22-1.6_prok


        pileup.sh -in ../mapping-files/TARA_018_5m_0.22-1.6_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-cov.tmp > ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-cov-and-det.tmp ../mapping-files/TARA_018_5m_0.22-1.6_prok-gene-cov.tmp
        
[Fri Dec  4 19:19:15 2020]
Finished job 572.
60 of 399 steps (15%) done

[Fri Dec  4 19:19:15 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD92.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD92-gene-coverages.tsv
    jobid: 558
    wildcards: ID=OSD92


        pileup.sh -in ../mapping-files/OSD92.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD92-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD92-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD92-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD92-gene-cov.tmp > ../mapping-files/OSD92-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD92-gene-cov-and-det.tmp ../mapping-files/OSD92-gene-cov.tmp
        
[Fri Dec  4 19:19:20 2020]
Finished job 558.
61 of 399 steps (15%) done

[Fri Dec  4 19:19:20 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD15-50.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD15-50-gene-coverages.tsv
    jobid: 467
    wildcards: ID=OSD15-50


        pileup.sh -in ../mapping-files/OSD15-50.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD15-50-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD15-50-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD15-50-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD15-50-gene-cov.tmp > ../mapping-files/OSD15-50-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD15-50-gene-cov-and-det.tmp ../mapping-files/OSD15-50-gene-cov.tmp
        
[Fri Dec  4 19:19:26 2020]
Finished job 467.
62 of 399 steps (16%) done

[Fri Dec  4 19:19:26 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_072_800m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_072_800m_0.22-3_prok-gene-coverages.tsv
    jobid: 638
    wildcards: ID=TARA_072_800m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_072_800m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_072_800m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_072_800m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_072_800m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_072_800m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_072_800m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_072_800m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_072_800m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 19:19:48 2020]
Finished job 638.
63 of 399 steps (16%) done

[Fri Dec  4 19:19:48 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/A4-07-1000m-34An.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/A4-07-1000m-34An-gene-coverages.tsv
    jobid: 775
    wildcards: ID=A4-07-1000m-34An


        pileup.sh -in ../mapping-files-HK/A4-07-1000m-34An.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/A4-07-1000m-34An-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/A4-07-1000m-34An-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/A4-07-1000m-34An-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/A4-07-1000m-34An-gene-cov.tmp > ../mapping-files-HK/A4-07-1000m-34An-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/A4-07-1000m-34An-gene-cov-and-det.tmp ../mapping-files-HK/A4-07-1000m-34An-gene-cov.tmp
        
[Fri Dec  4 19:20:12 2020]
Finished job 775.
64 of 399 steps (16%) done

[Fri Dec  4 19:20:12 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_068_50m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 624
    wildcards: ID=TARA_068_50m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_068_50m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_068_50m_0.45-0.8_girus-gene-cov.tmp
        
[Fri Dec  4 19:20:34 2020]
Finished job 624.
65 of 399 steps (16%) done

[Fri Dec  4 19:20:34 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_175_5m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_175_5m_0.22-3_prok-gene-coverages.tsv
    jobid: 732
    wildcards: ID=TARA_175_5m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_175_5m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_175_5m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_175_5m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_175_5m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_175_5m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_175_5m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_175_5m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_175_5m_0.22-3_prok-gene-cov.tmp
        
[Fri Dec  4 19:20:42 2020]
Finished job 732.
66 of 399 steps (17%) done

[Fri Dec  4 19:20:42 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_800m_0.22-3_prok.bam
    jobid: 237
    wildcards: ID=TARA_078_800m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_078_800m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_800m_0.22-3_prok ${curr_run_accs}
        
[Fri Dec  4 19:20:57 2020]
Finished job 693.
67 of 399 steps (17%) done

[Fri Dec  4 19:20:57 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A4-07-300m-34An.bam
    jobid: 363
    wildcards: ID=A4-07-300m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A4-07-300m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A4-07-300m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A4-07-300m-34An "${R1_link}" "${R2_link}"
        
[Fri Dec  4 19:25:47 2020]
Finished job 363.
68 of 399 steps (17%) done

[Fri Dec  4 19:25:47 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/A4-07-300m-34An.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/A4-07-300m-34An-gene-coverages.tsv
    jobid: 777
    wildcards: ID=A4-07-300m-34An


        pileup.sh -in ../mapping-files-HK/A4-07-300m-34An.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/A4-07-300m-34An-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/A4-07-300m-34An-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/A4-07-300m-34An-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/A4-07-300m-34An-gene-cov.tmp > ../mapping-files-HK/A4-07-300m-34An-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/A4-07-300m-34An-gene-cov-and-det.tmp ../mapping-files-HK/A4-07-300m-34An-gene-cov.tmp
        
[Fri Dec  4 19:25:48 2020]
Error in rule parse_gene_level_cov_and_det_HK_samples:
    jobid: 777
    output: ../mapping-files-HK/A4-07-300m-34An-gene-coverages.tsv
    shell:
        
        pileup.sh -in ../mapping-files-HK/A4-07-300m-34An.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/A4-07-300m-34An-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/A4-07-300m-34An-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/A4-07-300m-34An-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/A4-07-300m-34An-gene-cov.tmp > ../mapping-files-HK/A4-07-300m-34An-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/A4-07-300m-34An-gene-cov-and-det.tmp ../mapping-files-HK/A4-07-300m-34An-gene-cov.tmp
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Fri Dec  4 19:46:11 2020]
Finished job 164.
69 of 399 steps (17%) done
[Fri Dec  4 20:03:28 2020]
Finished job 244.
70 of 399 steps (18%) done
[Fri Dec  4 20:16:04 2020]
Finished job 233.
71 of 399 steps (18%) done
[Fri Dec  4 20:24:37 2020]
Finished job 236.
72 of 399 steps (18%) done
[Fri Dec  4 20:37:54 2020]
Finished job 188.
73 of 399 steps (18%) done
[Fri Dec  4 21:23:10 2020]
Finished job 219.
74 of 399 steps (19%) done
[Fri Dec  4 21:36:38 2020]
Finished job 237.
75 of 399 steps (19%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data2/mlee/Thaum/metagenome-dl-and-mapping-workflow/.snakemake/log/2020-12-04T155352.502136.snakemake.log
