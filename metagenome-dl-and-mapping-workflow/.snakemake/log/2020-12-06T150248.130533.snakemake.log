Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	2	dl_454_sample_and_run_mapping
	23	dl_HK_sample_and_run_mapping
	68	dl_illumina_sample_and_run_mapping
	10	parse_454_gene_level_cov_and_det
	181	parse_gene_level_cov_and_det
	41	parse_gene_level_cov_and_det_HK_samples
	326

[Sun Dec  6 15:02:49 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_180_30m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_180_30m_0.22-3_prok-gene-coverages.tsv
    jobid: 734
    wildcards: ID=TARA_180_30m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_180_30m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_180_30m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_180_30m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_180_30m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_180_30m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_180_30m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_180_30m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_180_30m_0.22-3_prok-gene-cov.tmp
        

[Sun Dec  6 15:02:49 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/UW022-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/UW022-8Ar-gene-coverages.tsv
    jobid: 818
    wildcards: ID=UW022-8Ar


        pileup.sh -in ../mapping-files-HK/UW022-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/UW022-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/UW022-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/UW022-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/UW022-8Ar-gene-cov.tmp > ../mapping-files-HK/UW022-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/UW022-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/UW022-8Ar-gene-cov.tmp
        

[Sun Dec  6 15:02:49 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/LB01-1000m-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/LB01-1000m-8Ar-gene-coverages.tsv
    jobid: 799
    wildcards: ID=LB01-1000m-8Ar


        pileup.sh -in ../mapping-files-HK/LB01-1000m-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/LB01-1000m-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/LB01-1000m-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/LB01-1000m-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/LB01-1000m-8Ar-gene-cov.tmp > ../mapping-files-HK/LB01-1000m-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/LB01-1000m-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/LB01-1000m-8Ar-gene-cov.tmp
        

[Sun Dec  6 15:02:49 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD167.bam
    jobid: 63
    wildcards: ID=OSD167


        curr_run_accs=$(grep -w -m 1 "^OSD167" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD167 ${curr_run_accs}
        

[Sun Dec  6 15:02:49 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.4.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_056_1000m_0.22-3_prok.bam
    jobid: 189
    wildcards: ID=TARA_056_1000m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_056_1000m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_056_1000m_0.22-3_prok ${curr_run_accs}
        

[Sun Dec  6 15:02:49 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_180_5m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_180_5m_0.22-3_prok-gene-coverages.tsv
    jobid: 735
    wildcards: ID=TARA_180_5m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_180_5m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_180_5m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_180_5m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_180_5m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_180_5m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_180_5m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_180_5m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_180_5m_0.22-3_prok-gene-cov.tmp
        

[Sun Dec  6 15:02:49 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/A3-09-3500m-34An.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/A3-09-3500m-34An-gene-coverages.tsv
    jobid: 773
    wildcards: ID=A3-09-3500m-34An


        pileup.sh -in ../mapping-files-HK/A3-09-3500m-34An.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/A3-09-3500m-34An-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/A3-09-3500m-34An-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/A3-09-3500m-34An-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/A3-09-3500m-34An-gene-cov.tmp > ../mapping-files-HK/A3-09-3500m-34An-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/A3-09-3500m-34An-gene-cov-and-det.tmp ../mapping-files-HK/A3-09-3500m-34An-gene-cov.tmp
        

[Sun Dec  6 15:02:49 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_173_35m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_173_35m_0.22-3_prok-gene-coverages.tsv
    jobid: 728
    wildcards: ID=TARA_173_35m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_173_35m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_173_35m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_173_35m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_173_35m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_173_35m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_173_35m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_173_35m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_173_35m_0.22-3_prok-gene-cov.tmp
        
[Sun Dec  6 15:02:49 2020]
Error in rule parse_gene_level_cov_and_det_HK_samples:
    jobid: 799
    output: ../mapping-files-HK/LB01-1000m-8Ar-gene-coverages.tsv
    shell:
        
        pileup.sh -in ../mapping-files-HK/LB01-1000m-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/LB01-1000m-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/LB01-1000m-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/LB01-1000m-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/LB01-1000m-8Ar-gene-cov.tmp > ../mapping-files-HK/LB01-1000m-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/LB01-1000m-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/LB01-1000m-8Ar-gene-cov.tmp
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sun Dec  6 15:02:52 2020]
Finished job 818.
1 of 326 steps (0.31%) done
[Sun Dec  6 15:02:53 2020]
Finished job 735.
2 of 326 steps (0.61%) done
[Sun Dec  6 15:02:54 2020]
Finished job 734.
3 of 326 steps (0.92%) done
[Sun Dec  6 15:02:54 2020]
Finished job 728.
4 of 326 steps (1%) done
[Sun Dec  6 15:02:56 2020]
Finished job 773.
5 of 326 steps (2%) done
Terminating processes on user request, this might take some time.
[Sun Dec  6 15:03:24 2020]
[Sun Dec  6 15:03:24 2020]
Error in rule dl_illumina_sample_and_run_mapping:
Error in rule dl_illumina_sample_and_run_mapping:
    jobid: 63
    jobid: 189
    output: ../mapping-files/OSD167.bam
    output: ../mapping-files/TARA_056_1000m_0.22-3_prok.bam
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^OSD167" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD167 ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_056_1000m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_056_1000m_0.22-3_prok ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)


Removing output files of failed job dl_illumina_sample_and_run_mapping since they might be corrupted:
../mapping-files/OSD167.bam
