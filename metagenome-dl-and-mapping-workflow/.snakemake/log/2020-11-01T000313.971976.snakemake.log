Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	build_bowtie2_index
	1	call_genes
	1	combine_ref_genomes
	354	dl_sample_and_run_mapping
	60	dl_sample_and_run_mapping_HK_samples
	354	parse_gene_level_cov_and_det
	60	parse_gene_level_cov_and_det_HK_samples
	1	run_KO_annotation
	833

[Sun Nov  1 00:03:15 2020]
rule combine_ref_genomes:
    input: ../ref-genomes/F8_1.fa, ../ref-genomes/F8_2.fa, ../ref-genomes/GCA_000200715.1.fa, ../ref-genomes/GCA_000204585.1.fa, ../ref-genomes/GCA_002494485.1.fa, ../ref-genomes/GCA_002713325.1.fa, ../ref-genomes/GCA_014066365.1.fa, ../ref-genomes/GCF_000018465.1.fa, ../ref-genomes/GCF_000220175.1.fa, ../ref-genomes/GCF_000241145.1.fa, ../ref-genomes/GCF_000242875.2.fa, ../ref-genomes/GCF_000299365.1.fa, ../ref-genomes/GCF_000299395.1.fa, ../ref-genomes/GCF_000303155.1.fa, ../ref-genomes/GCF_000328945.1.fa, ../ref-genomes/GCF_000812185.1.fa, ../ref-genomes/GCF_000875775.1.fa, ../ref-genomes/GCF_000955905.1.fa, ../ref-genomes/GCF_000956175.1.fa, ../ref-genomes/GCF_001541925.1.fa, ../ref-genomes/GCF_001870125.1.fa, ../ref-genomes/GCF_002156965.1.fa, ../ref-genomes/GCF_003045125.1.fa, ../ref-genomes/GCF_003175215.1.fa, ../ref-genomes/GCF_013407145.1.fa, ../ref-genomes/GCF_013407165.1.fa, ../ref-genomes/GCF_013407185.1.fa, ../ref-genomes/GCF_013407385.1.fa, ../ref-genomes/GCF_014078525.1.fa, ../ref-genomes/GCF_014078535.1.fa, ../ref-genomes/GCF_014078545.1.fa, ../ref-genomes/GCF_900167955.1.fa, ../ref-genomes/JGI_2527291500.fa, ../ref-genomes/JGI_2639762712.fa, ../ref-genomes/JGI_2651870209.fa, ../ref-genomes/PRE1_15m_bin1.fa, ../ref-genomes/PRE2_20m_bin1.fa, ../ref-genomes/PRE3_10m_bin1.fa, ../ref-genomes/SAMC021086.fa, ../ref-genomes/SAMC021088.fa, ../ref-genomes/SAMC021089.fa, ../ref-genomes/SAMC021091.fa, ../ref-genomes/SAMC021092.fa, ../ref-genomes/SAMC021093.fa, ../ref-genomes/SAMC021095.fa, ../ref-genomes/SAMC021096.fa, ../ref-genomes/SAMC026834.fa, ../ref-genomes/SAMC026836.fa, ../ref-genomes/ST1.fa, ../ref-genomes/ST2.fa, ../ref-genomes/ST3.fa
    output: ../ref-genomes/all-combined.fa
    jobid: 831


        cat ../ref-genomes/F8_1.fa ../ref-genomes/F8_2.fa ../ref-genomes/GCA_000200715.1.fa ../ref-genomes/GCA_000204585.1.fa ../ref-genomes/GCA_002494485.1.fa ../ref-genomes/GCA_002713325.1.fa ../ref-genomes/GCA_014066365.1.fa ../ref-genomes/GCF_000018465.1.fa ../ref-genomes/GCF_000220175.1.fa ../ref-genomes/GCF_000241145.1.fa ../ref-genomes/GCF_000242875.2.fa ../ref-genomes/GCF_000299365.1.fa ../ref-genomes/GCF_000299395.1.fa ../ref-genomes/GCF_000303155.1.fa ../ref-genomes/GCF_000328945.1.fa ../ref-genomes/GCF_000812185.1.fa ../ref-genomes/GCF_000875775.1.fa ../ref-genomes/GCF_000955905.1.fa ../ref-genomes/GCF_000956175.1.fa ../ref-genomes/GCF_001541925.1.fa ../ref-genomes/GCF_001870125.1.fa ../ref-genomes/GCF_002156965.1.fa ../ref-genomes/GCF_003045125.1.fa ../ref-genomes/GCF_003175215.1.fa ../ref-genomes/GCF_013407145.1.fa ../ref-genomes/GCF_013407165.1.fa ../ref-genomes/GCF_013407185.1.fa ../ref-genomes/GCF_013407385.1.fa ../ref-genomes/GCF_014078525.1.fa ../ref-genomes/GCF_014078535.1.fa ../ref-genomes/GCF_014078545.1.fa ../ref-genomes/GCF_900167955.1.fa ../ref-genomes/JGI_2527291500.fa ../ref-genomes/JGI_2639762712.fa ../ref-genomes/JGI_2651870209.fa ../ref-genomes/PRE1_15m_bin1.fa ../ref-genomes/PRE2_20m_bin1.fa ../ref-genomes/PRE3_10m_bin1.fa ../ref-genomes/SAMC021086.fa ../ref-genomes/SAMC021088.fa ../ref-genomes/SAMC021089.fa ../ref-genomes/SAMC021091.fa ../ref-genomes/SAMC021092.fa ../ref-genomes/SAMC021093.fa ../ref-genomes/SAMC021095.fa ../ref-genomes/SAMC021096.fa ../ref-genomes/SAMC026834.fa ../ref-genomes/SAMC026836.fa ../ref-genomes/ST1.fa ../ref-genomes/ST2.fa ../ref-genomes/ST3.fa > ../ref-genomes/all-combined.fa
        
[Sun Nov  1 00:03:16 2020]
Finished job 831.
1 of 833 steps (0.12%) done

[Sun Nov  1 00:03:16 2020]
rule build_bowtie2_index:
    input: ../ref-genomes/all-combined.fa
    output: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    log: ../mapping-files/bowtie2-build.log
    jobid: 1


        bowtie2-build ../ref-genomes/all-combined.fa ../mapping-files/all-combined > ../mapping-files/bowtie2-build.log 2>&1
        cp ../mapping-files/all-combined.1.bt2 ../mapping-files/all-combined.2.bt2 ../mapping-files/all-combined.3.bt2 ../mapping-files/all-combined.rev.1.bt2 ../mapping-files/all-combined.rev.2.bt2 ../mapping-files-HK/
        

[Sun Nov  1 00:03:16 2020]
rule call_genes:
    input: ../ref-genomes/all-combined.fa
    output: ../genes-and-annotations/all-genes.faa, ../genes-and-annotations/all-genes.fa, ../genes-and-annotations/all-genes.gff
    jobid: 832


        prodigal -q -c -p meta -a ../genes-and-annotations/all-genes.faa -d ../genes-and-annotations/all-genes.fa -f gff -o ../genes-and-annotations/all-genes.gff -i ../ref-genomes/all-combined.fa
        
[Sun Nov  1 00:07:24 2020]
Finished job 1.
2 of 833 steps (0.24%) done

[Sun Nov  1 00:07:24 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD177.bam
    jobid: 8
    wildcards: ID=OSD177


        curr_run_accs=$(grep -w -m 1 "^OSD177" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD177 ${curr_run_accs}
        

[Sun Nov  1 00:07:24 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD176.bam
    jobid: 9
    wildcards: ID=OSD176


        curr_run_accs=$(grep -w -m 1 "^OSD176" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD176 ${curr_run_accs}
        

[Sun Nov  1 00:07:24 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD159.bam
    jobid: 23
    wildcards: ID=OSD159


        curr_run_accs=$(grep -w -m 1 "^OSD159" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD159 ${curr_run_accs}
        
[Sun Nov  1 00:08:13 2020]
Finished job 8.
3 of 833 steps (0.36%) done

[Sun Nov  1 00:08:14 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_031_5m_0.22-1.6_girus.bam
    jobid: 288
    wildcards: ID=TARA_031_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_031_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_031_5m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 00:08:40 2020]
Finished job 9.
4 of 833 steps (0.48%) done

[Sun Nov  1 00:08:40 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_043_5m_0.22-1.6_girus.bam
    jobid: 302
    wildcards: ID=TARA_043_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_043_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_043_5m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 00:08:50 2020]
Finished job 288.
5 of 833 steps (0.60%) done

[Sun Nov  1 00:08:50 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_070_5m_0.22-0.45_girus.bam
    jobid: 316
    wildcards: ID=TARA_070_5m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_070_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_070_5m_0.22-0.45_girus ${curr_run_accs}
        
[Sun Nov  1 00:08:51 2020]
Finished job 23.
6 of 833 steps (0.72%) done

[Sun Nov  1 00:08:51 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_146_5m_0.22-3_prok.bam
    jobid: 274
    wildcards: ID=TARA_146_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_146_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_146_5m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 00:09:43 2020]
Finished job 302.
7 of 833 steps (0.84%) done

[Sun Nov  1 00:09:43 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_124_5m_0.1-0.22_girus.bam
    jobid: 344
    wildcards: ID=TARA_124_5m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_124_5m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_124_5m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 00:18:52 2020]
Finished job 832.
8 of 833 steps (0.96%) done

[Sun Nov  1 00:18:52 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD49.bam
    jobid: 106
    wildcards: ID=OSD49


        curr_run_accs=$(grep -w -m 1 "^OSD49" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD49 ${curr_run_accs}
        
[Sun Nov  1 00:20:32 2020]
Finished job 106.
9 of 833 steps (1%) done

[Sun Nov  1 00:20:32 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_168_10-100m_0.22-3_prok.bam
    jobid: 162
    wildcards: ID=TARA_168_10-100m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_168_10-100m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_168_10-100m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 01:08:09 2020]
Finished job 344.
10 of 833 steps (1%) done

[Sun Nov  1 01:08:10 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD177.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD177-gene-coverages.tsv
    jobid: 422
    wildcards: ID=OSD177


        pileup.sh -in ../mapping-files/OSD177.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD177-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD177-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD177-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD177-gene-cov.tmp > ../mapping-files/OSD177-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD177-gene-cov-and-det.tmp ../mapping-files/OSD177-gene-cov.tmp
        
[Sun Nov  1 01:08:21 2020]
Finished job 422.
11 of 833 steps (1%) done

[Sun Nov  1 01:08:21 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/R16E-3236m-9Ar.bam
    jobid: 391
    wildcards: ID=R16E-3236m-9Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^R16E-3236m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^R16E-3236m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 R16E-3236m-9Ar "${R1_link}" "${R2_link}"
        
[Sun Nov  1 01:25:31 2020]
Finished job 391.
12 of 833 steps (1%) done

[Sun Nov  1 01:25:31 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD64.bam
    jobid: 92
    wildcards: ID=OSD64


        curr_run_accs=$(grep -w -m 1 "^OSD64" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD64 ${curr_run_accs}
        
[Sun Nov  1 01:27:58 2020]
Finished job 92.
13 of 833 steps (2%) done

[Sun Nov  1 01:27:59 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD90.bam
    jobid: 78
    wildcards: ID=OSD90


        curr_run_accs=$(grep -w -m 1 "^OSD90" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD90 ${curr_run_accs}
        
[Sun Nov  1 01:29:55 2020]
Finished job 78.
14 of 833 steps (2%) done

[Sun Nov  1 01:29:56 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD123.bam
    jobid: 50
    wildcards: ID=OSD123


        curr_run_accs=$(grep -w -m 1 "^OSD123" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD123 ${curr_run_accs}
        
[Sun Nov  1 01:31:48 2020]
Finished job 50.
15 of 833 steps (2%) done

[Sun Nov  1 01:31:48 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_123_150m_0.45-0.8_girus.bam
    jobid: 343
    wildcards: ID=TARA_123_150m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_123_150m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_123_150m_0.45-0.8_girus ${curr_run_accs}
        
[Sun Nov  1 03:43:57 2020]
Finished job 162.
16 of 833 steps (2%) done

[Sun Nov  1 03:43:58 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD122.bam
    jobid: 51
    wildcards: ID=OSD122


        curr_run_accs=$(grep -w -m 1 "^OSD122" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD122 ${curr_run_accs}
        
[Sun Nov  1 03:45:35 2020]
Finished job 51.
17 of 833 steps (2%) done

[Sun Nov  1 03:45:35 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD81.bam
    jobid: 79
    wildcards: ID=OSD81


        curr_run_accs=$(grep -w -m 1 "^OSD81" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD81 ${curr_run_accs}
        
[Sun Nov  1 03:47:34 2020]
Finished job 79.
18 of 833 steps (2%) done

[Sun Nov  1 03:47:34 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_068_50m_0.45-0.8_girus.bam
    jobid: 315
    wildcards: ID=TARA_068_50m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_068_50m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_068_50m_0.45-0.8_girus ${curr_run_accs}
        
[Sun Nov  1 04:05:16 2020]
Finished job 274.
19 of 833 steps (2%) done

[Sun Nov  1 04:05:18 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_041_5m_0.1-0.22_girus.bam
    jobid: 301
    wildcards: ID=TARA_041_5m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_041_5m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_041_5m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 04:10:04 2020]
Finished job 343.
20 of 833 steps (2%) done

[Sun Nov  1 04:10:05 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_123_150m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 757
    wildcards: ID=TARA_123_150m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_123_150m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_123_150m_0.45-0.8_girus-gene-cov.tmp
        
[Sun Nov  1 04:10:16 2020]
Finished job 757.
21 of 833 steps (3%) done

[Sun Nov  1 04:10:16 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD63.bam
    jobid: 93
    wildcards: ID=OSD63


        curr_run_accs=$(grep -w -m 1 "^OSD63" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD63 ${curr_run_accs}
        
[Sun Nov  1 04:11:46 2020]
Finished job 93.
22 of 833 steps (3%) done

[Sun Nov  1 04:11:46 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_009_55m_0.22-1.6_girus.bam
    jobid: 287
    wildcards: ID=TARA_009_55m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_009_55m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_009_55m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 04:14:21 2020]
Finished job 316.
23 of 833 steps (3%) done

[Sun Nov  1 04:14:21 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_145_590m_0.22-3_prok.bam
    jobid: 273
    wildcards: ID=TARA_145_590m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_145_590m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_145_590m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 04:25:36 2020]
Finished job 301.
24 of 833 steps (3%) done

[Sun Nov  1 04:25:37 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD48.bam
    jobid: 107
    wildcards: ID=OSD48


        curr_run_accs=$(grep -w -m 1 "^OSD48" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD48 ${curr_run_accs}
        
[Sun Nov  1 04:26:23 2020]
Finished job 107.
25 of 833 steps (3%) done

[Sun Nov  1 04:26:23 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_173_5m_0.22-3_prok.bam
    jobid: 163
    wildcards: ID=TARA_173_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_173_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_173_5m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 05:23:28 2020]
Finished job 287.
26 of 833 steps (3%) done

[Sun Nov  1 05:23:31 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_168_40m_0.22-3_prok.bam
    jobid: 161
    wildcards: ID=TARA_168_40m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_168_40m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_168_40m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 06:02:55 2020]
Finished job 315.
27 of 833 steps (3%) done

[Sun Nov  1 06:02:56 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_146_640m_0.22-3_prok.bam
    jobid: 275
    wildcards: ID=TARA_146_640m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_146_640m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_146_640m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 08:08:38 2020]
Finished job 163.
28 of 833 steps (3%) done

[Sun Nov  1 08:08:38 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_034_5m_0.1-0.22_girus.bam
    jobid: 289
    wildcards: ID=TARA_034_5m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_034_5m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_034_5m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 08:46:38 2020]
Finished job 161.
29 of 833 steps (3%) done

[Sun Nov  1 08:46:39 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_046_5m_0.22-1.6_girus.bam
    jobid: 303
    wildcards: ID=TARA_046_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_046_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_046_5m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 08:47:19 2020]
Finished job 303.
30 of 833 steps (4%) done

[Sun Nov  1 08:47:20 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_070_5m_0.45-0.8_girus.bam
    jobid: 317
    wildcards: ID=TARA_070_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_070_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_070_5m_0.45-0.8_girus ${curr_run_accs}
        
[Sun Nov  1 09:06:17 2020]
Finished job 273.
31 of 833 steps (4%) done

[Sun Nov  1 09:06:18 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD50.bam
    jobid: 105
    wildcards: ID=OSD50


        curr_run_accs=$(grep -w -m 1 "^OSD50" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD50 ${curr_run_accs}
        
[Sun Nov  1 09:08:55 2020]
Finished job 105.
32 of 833 steps (4%) done

[Sun Nov  1 09:08:55 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_124_5m_0.22-0.45_girus.bam
    jobid: 345
    wildcards: ID=TARA_124_5m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_124_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_124_5m_0.22-0.45_girus ${curr_run_accs}
        
[Sun Nov  1 09:47:38 2020]
Finished job 275.
33 of 833 steps (4%) done

[Sun Nov  1 09:47:38 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD65.bam
    jobid: 91
    wildcards: ID=OSD65


        curr_run_accs=$(grep -w -m 1 "^OSD65" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD65 ${curr_run_accs}
        
[Sun Nov  1 09:50:02 2020]
Finished job 91.
34 of 833 steps (4%) done

[Sun Nov  1 09:50:02 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD91.bam
    jobid: 77
    wildcards: ID=OSD91


        curr_run_accs=$(grep -w -m 1 "^OSD91" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD91 ${curr_run_accs}
        
[Sun Nov  1 09:51:13 2020]
Finished job 77.
35 of 833 steps (4%) done

[Sun Nov  1 09:51:14 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD124.bam
    jobid: 49
    wildcards: ID=OSD124


        curr_run_accs=$(grep -w -m 1 "^OSD124" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD124 ${curr_run_accs}
        
[Sun Nov  1 09:52:22 2020]
Finished job 49.
36 of 833 steps (4%) done

[Sun Nov  1 09:52:22 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_068_50m_0.22-0.45_girus.bam
    jobid: 314
    wildcards: ID=TARA_068_50m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_068_50m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_068_50m_0.22-0.45_girus ${curr_run_accs}
        
[Sun Nov  1 10:00:20 2020]
Finished job 289.
37 of 833 steps (4%) done

[Sun Nov  1 10:00:20 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_039_270m_0.22-1.6_girus.bam
    jobid: 300
    wildcards: ID=TARA_039_270m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_039_270m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_039_270m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 10:01:02 2020]
Finished job 300.
38 of 833 steps (5%) done

[Sun Nov  1 10:01:03 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A4-07-1000m-34An.bam
    jobid: 411
    wildcards: ID=A4-07-1000m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A4-07-1000m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A4-07-1000m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A4-07-1000m-34An "${R1_link}" "${R2_link}"
        
[Sun Nov  1 10:10:02 2020]
Finished job 411.
39 of 833 steps (5%) done

[Sun Nov  1 10:10:03 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_009_5m_0.22-1.6_girus.bam
    jobid: 286
    wildcards: ID=TARA_009_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_009_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_009_5m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 11:07:57 2020]
Finished job 286.
40 of 833 steps (5%) done

[Sun Nov  1 11:07:58 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_145_5m_0.22-3_prok.bam
    jobid: 272
    wildcards: ID=TARA_145_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_145_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_145_5m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 11:45:33 2020]
Finished job 345.
41 of 833 steps (5%) done

[Sun Nov  1 11:45:33 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD122.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD122-gene-coverages.tsv
    jobid: 465
    wildcards: ID=OSD122


        pileup.sh -in ../mapping-files/OSD122.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD122-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD122-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD122-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD122-gene-cov.tmp > ../mapping-files/OSD122-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD122-gene-cov-and-det.tmp ../mapping-files/OSD122-gene-cov.tmp
        
[Sun Nov  1 11:45:49 2020]
Finished job 465.
42 of 833 steps (5%) done

[Sun Nov  1 11:45:49 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD118.bam
    jobid: 52
    wildcards: ID=OSD118


        curr_run_accs=$(grep -w -m 1 "^OSD118" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD118 ${curr_run_accs}
        
[Sun Nov  1 11:46:46 2020]
Finished job 52.
43 of 833 steps (5%) done

[Sun Nov  1 11:46:46 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_168_5m_0.22-3_prok.bam
    jobid: 160
    wildcards: ID=TARA_168_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_168_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_168_5m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 12:05:13 2020]
Finished job 317.
44 of 833 steps (5%) done

[Sun Nov  1 12:05:13 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD51.bam
    jobid: 104
    wildcards: ID=OSD51


        curr_run_accs=$(grep -w -m 1 "^OSD51" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD51 ${curr_run_accs}
        
[Sun Nov  1 12:07:23 2020]
Finished job 104.
45 of 833 steps (5%) done

[Sun Nov  1 12:07:23 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD80-2.bam
    jobid: 80
    wildcards: ID=OSD80-2


        curr_run_accs=$(grep -w -m 1 "^OSD80-2" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD80-2 ${curr_run_accs}
        
[Sun Nov  1 12:09:12 2020]
Finished job 80.
46 of 833 steps (6%) done

[Sun Nov  1 12:09:12 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD69.bam
    jobid: 90
    wildcards: ID=OSD69


        curr_run_accs=$(grep -w -m 1 "^OSD69" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD69 ${curr_run_accs}
        
[Sun Nov  1 12:10:38 2020]
Finished job 90.
47 of 833 steps (6%) done

[Sun Nov  1 12:10:38 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD92.bam
    jobid: 76
    wildcards: ID=OSD92


        curr_run_accs=$(grep -w -m 1 "^OSD92" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD92 ${curr_run_accs}
        
[Sun Nov  1 12:12:40 2020]
Finished job 76.
48 of 833 steps (6%) done

[Sun Nov  1 12:12:40 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD125.bam
    jobid: 48
    wildcards: ID=OSD125


        curr_run_accs=$(grep -w -m 1 "^OSD125" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD125 ${curr_run_accs}
        
[Sun Nov  1 12:14:18 2020]
Finished job 48.
49 of 833 steps (6%) done

[Sun Nov  1 12:14:18 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/UW048-33An.bam
    jobid: 400
    wildcards: ID=UW048-33An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^UW048-33An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^UW048-33An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 UW048-33An "${R1_link}" "${R2_link}"
        
[Sun Nov  1 12:34:44 2020]
Finished job 400.
50 of 833 steps (6%) done

[Sun Nov  1 12:34:45 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_123_150m_0.1-0.22_girus.bam
    jobid: 341
    wildcards: ID=TARA_123_150m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_123_150m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_123_150m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 14:05:46 2020]
Finished job 314.
51 of 833 steps (6%) done

[Sun Nov  1 14:05:46 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD62.bam
    jobid: 94
    wildcards: ID=OSD62


        curr_run_accs=$(grep -w -m 1 "^OSD62" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD62 ${curr_run_accs}
        
[Sun Nov  1 14:07:29 2020]
Finished job 94.
52 of 833 steps (6%) done

[Sun Nov  1 14:07:29 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD47.bam
    jobid: 108
    wildcards: ID=OSD47


        curr_run_accs=$(grep -w -m 1 "^OSD47" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD47 ${curr_run_accs}
        
[Sun Nov  1 14:08:55 2020]
Finished job 108.
53 of 833 steps (6%) done

[Sun Nov  1 14:08:55 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_068_5m_0.45-0.8_girus.bam
    jobid: 313
    wildcards: ID=TARA_068_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_068_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_068_5m_0.45-0.8_girus ${curr_run_accs}
        
[Sun Nov  1 14:49:16 2020]
Finished job 341.
54 of 833 steps (6%) done

[Sun Nov  1 14:49:17 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_039_270m_0.1-0.22_girus.bam
    jobid: 299
    wildcards: ID=TARA_039_270m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_039_270m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_039_270m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 14:54:23 2020]
Finished job 160.
55 of 833 steps (7%) done

[Sun Nov  1 14:54:23 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_173_35m_0.22-3_prok.bam
    jobid: 164
    wildcards: ID=TARA_173_35m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_173_35m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_173_35m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 15:09:41 2020]
Finished job 272.
56 of 833 steps (7%) done

[Sun Nov  1 15:09:42 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_006_8m_0.22-1.6_girus.bam
    jobid: 285
    wildcards: ID=TARA_006_8m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_006_8m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_006_8m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 15:09:56 2020]
Finished job 285.
57 of 833 steps (7%) done

[Sun Nov  1 15:09:56 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_142_640m_0.22-3_prok.bam
    jobid: 271
    wildcards: ID=TARA_142_640m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_142_640m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_142_640m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 16:05:33 2020]
Finished job 299.
58 of 833 steps (7%) done

[Sun Nov  1 16:05:34 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_039_270m_0.1-0.22_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-coverages.tsv
    jobid: 713
    wildcards: ID=TARA_039_270m_0.1-0.22_girus


        pileup.sh -in ../mapping-files/TARA_039_270m_0.1-0.22_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-cov.tmp > ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-cov-and-det.tmp ../mapping-files/TARA_039_270m_0.1-0.22_girus-gene-cov.tmp
        
[Sun Nov  1 16:05:46 2020]
Finished job 713.
59 of 833 steps (7%) done

[Sun Nov  1 16:05:46 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_163_499m_0.22-3_prok.bam
    jobid: 159
    wildcards: ID=TARA_163_499m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_163_499m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_163_499m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 17:08:56 2020]
Finished job 164.
60 of 833 steps (7%) done

[Sun Nov  1 17:08:56 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD52.bam
    jobid: 103
    wildcards: ID=OSD52


        curr_run_accs=$(grep -w -m 1 "^OSD52" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD52 ${curr_run_accs}
        
[Sun Nov  1 17:10:38 2020]
Finished job 313.
61 of 833 steps (7%) done

[Sun Nov  1 17:10:38 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_150_40m_0.22-3_prok.bam
    jobid: 276
    wildcards: ID=TARA_150_40m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_150_40m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_150_40m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 17:11:22 2020]
Finished job 103.
62 of 833 steps (7%) done

[Sun Nov  1 17:11:22 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_036_5m_0.1-0.22_girus.bam
    jobid: 290
    wildcards: ID=TARA_036_5m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_036_5m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_036_5m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 17:22:42 2020]
Finished job 290.
63 of 833 steps (8%) done

[Sun Nov  1 17:22:42 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_048_5m_0.1-0.22_girus.bam
    jobid: 304
    wildcards: ID=TARA_048_5m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_048_5m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_048_5m_0.1-0.22_girus ${curr_run_accs}
        
[Sun Nov  1 18:13:59 2020]
Finished job 271.
64 of 833 steps (8%) done

[Sun Nov  1 18:14:00 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_070_800m_0.22-0.45_girus.bam
    jobid: 318
    wildcards: ID=TARA_070_800m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_070_800m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_070_800m_0.22-0.45_girus ${curr_run_accs}
        
[Sun Nov  1 18:28:21 2020]
Finished job 304.
65 of 833 steps (8%) done

[Sun Nov  1 18:28:22 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD70.bam
    jobid: 89
    wildcards: ID=OSD70


        curr_run_accs=$(grep -w -m 1 "^OSD70" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD70 ${curr_run_accs}
        
[Sun Nov  1 18:30:14 2020]
Finished job 89.
66 of 833 steps (8%) done

[Sun Nov  1 18:30:14 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD93.bam
    jobid: 75
    wildcards: ID=OSD93


        curr_run_accs=$(grep -w -m 1 "^OSD93" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD93 ${curr_run_accs}
        
[Sun Nov  1 18:31:17 2020]
Finished job 75.
67 of 833 steps (8%) done

[Sun Nov  1 18:31:18 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD126.bam
    jobid: 47
    wildcards: ID=OSD126


        curr_run_accs=$(grep -w -m 1 "^OSD126" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD126 ${curr_run_accs}
        
[Sun Nov  1 18:33:35 2020]
Finished job 47.
68 of 833 steps (8%) done

[Sun Nov  1 18:33:35 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD123.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD123-gene-coverages.tsv
    jobid: 464
    wildcards: ID=OSD123


        pileup.sh -in ../mapping-files/OSD123.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD123-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD123-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD123-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD123-gene-cov.tmp > ../mapping-files/OSD123-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD123-gene-cov-and-det.tmp ../mapping-files/OSD123-gene-cov.tmp
        
[Sun Nov  1 18:33:48 2020]
Finished job 464.
69 of 833 steps (8%) done

[Sun Nov  1 18:33:48 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_124_5m_0.45-0.8_girus.bam
    jobid: 346
    wildcards: ID=TARA_124_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_124_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_124_5m_0.45-0.8_girus ${curr_run_accs}
        
[Sun Nov  1 18:38:25 2020]
Finished job 318.
70 of 833 steps (8%) done

[Sun Nov  1 18:38:25 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_123_5m_0.45-0.8_girus.bam
    jobid: 340
    wildcards: ID=TARA_123_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_123_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_123_5m_0.45-0.8_girus ${curr_run_accs}
        
Warning: the following output files of rule dl_sample_and_run_mapping were not present when the DAG was created:
{'../mapping-files/TARA_123_5m_0.45-0.8_girus.bam'}
[Sun Nov  1 19:25:06 2020]
Finished job 159.
71 of 833 steps (9%) done

[Sun Nov  1 19:25:06 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_163_499m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_163_499m_0.22-3_prok-gene-coverages.tsv
    jobid: 573
    wildcards: ID=TARA_163_499m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_163_499m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_163_499m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_163_499m_0.22-3_prok-gene-cov.tmp
        
[Sun Nov  1 19:25:40 2020]
Finished job 573.
72 of 833 steps (9%) done

[Sun Nov  1 19:25:40 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_068_5m_0.22-0.45_girus.bam
    jobid: 312
    wildcards: ID=TARA_068_5m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_068_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_068_5m_0.22-0.45_girus ${curr_run_accs}
        
[Sun Nov  1 19:57:09 2020]
Finished job 276.
73 of 833 steps (9%) done

[Sun Nov  1 19:57:09 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_039_5m_0.22-1.6_girus.bam
    jobid: 298
    wildcards: ID=TARA_039_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_039_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_039_5m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 19:57:49 2020]
Finished job 298.
74 of 833 steps (9%) done

[Sun Nov  1 19:57:49 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_004_5m_0.22-1.6_girus.bam
    jobid: 284
    wildcards: ID=TARA_004_5m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_004_5m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_004_5m_0.22-1.6_girus ${curr_run_accs}
        
[Sun Nov  1 19:58:20 2020]
Finished job 284.
75 of 833 steps (9%) done

[Sun Nov  1 19:58:21 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_142_125m_0.22-3_prok.bam
    jobid: 270
    wildcards: ID=TARA_142_125m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_142_125m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_142_125m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 20:50:17 2020]
Finished job 346.
76 of 833 steps (9%) done

[Sun Nov  1 20:50:18 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_163_5m_0.22-3_prok.bam
    jobid: 158
    wildcards: ID=TARA_163_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_163_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_163_5m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 20:56:27 2020]
Finished job 340.
77 of 833 steps (9%) done

[Sun Nov  1 20:56:27 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD53.bam
    jobid: 102
    wildcards: ID=OSD53


        curr_run_accs=$(grep -w -m 1 "^OSD53" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD53 ${curr_run_accs}
        
[Sun Nov  1 20:58:23 2020]
Finished job 102.
78 of 833 steps (9%) done

[Sun Nov  1 20:58:23 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/UW050-0m-34An.bam
    jobid: 401
    wildcards: ID=UW050-0m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^UW050-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^UW050-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 UW050-0m-34An "${R1_link}" "${R2_link}"
        
[Sun Nov  1 21:41:54 2020]
Finished job 270.
79 of 833 steps (9%) done

[Sun Nov  1 21:41:54 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD117.bam
    jobid: 53
    wildcards: ID=OSD117


        curr_run_accs=$(grep -w -m 1 "^OSD117" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD117 ${curr_run_accs}
        
[Sun Nov  1 21:42:47 2020]
Finished job 53.
80 of 833 steps (10%) done

[Sun Nov  1 21:42:47 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD71.bam
    jobid: 88
    wildcards: ID=OSD71


        curr_run_accs=$(grep -w -m 1 "^OSD71" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD71 ${curr_run_accs}
        
[Sun Nov  1 21:44:12 2020]
Finished job 88.
81 of 833 steps (10%) done

[Sun Nov  1 21:44:12 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD94.bam
    jobid: 74
    wildcards: ID=OSD94


        curr_run_accs=$(grep -w -m 1 "^OSD94" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD94 ${curr_run_accs}
        
[Sun Nov  1 21:45:23 2020]
Finished job 74.
82 of 833 steps (10%) done

[Sun Nov  1 21:45:23 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD127.bam
    jobid: 46
    wildcards: ID=OSD127


        curr_run_accs=$(grep -w -m 1 "^OSD127" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD127 ${curr_run_accs}
        
[Sun Nov  1 21:46:20 2020]
Finished job 46.
83 of 833 steps (10%) done

[Sun Nov  1 21:46:20 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/B08-3200m-8Ar.bam
    jobid: 390
    wildcards: ID=B08-3200m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^B08-3200m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^B08-3200m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 B08-3200m-8Ar "${R1_link}" "${R2_link}"
        
[Sun Nov  1 21:46:34 2020]
Finished job 312.
84 of 833 steps (10%) done

[Sun Nov  1 21:46:34 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD80-0.bam
    jobid: 81
    wildcards: ID=OSD80-0


        curr_run_accs=$(grep -w -m 1 "^OSD80-0" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD80-0 ${curr_run_accs}
        
[Sun Nov  1 21:47:36 2020]
Finished job 81.
85 of 833 steps (10%) done

[Sun Nov  1 21:47:36 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD81.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD81-gene-coverages.tsv
    jobid: 493
    wildcards: ID=OSD81


        pileup.sh -in ../mapping-files/OSD81.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD81-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD81-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD81-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD81-gene-cov.tmp > ../mapping-files/OSD81-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD81-gene-cov-and-det.tmp ../mapping-files/OSD81-gene-cov.tmp
        
[Sun Nov  1 21:47:45 2020]
Finished job 493.
86 of 833 steps (10%) done

[Sun Nov  1 21:47:45 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD61.bam
    jobid: 95
    wildcards: ID=OSD61


        curr_run_accs=$(grep -w -m 1 "^OSD61" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD61 ${curr_run_accs}
        
[Sun Nov  1 21:48:55 2020]
Finished job 95.
87 of 833 steps (10%) done

[Sun Nov  1 21:48:55 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD46.bam
    jobid: 109
    wildcards: ID=OSD46


        curr_run_accs=$(grep -w -m 1 "^OSD46" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD46 ${curr_run_accs}
        
[Sun Nov  1 21:49:23 2020]
Finished job 109.
88 of 833 steps (11%) done

[Sun Nov  1 21:49:23 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/B08-1000m-8Ar.bam
    jobid: 381
    wildcards: ID=B08-1000m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^B08-1000m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^B08-1000m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 B08-1000m-8Ar "${R1_link}" "${R2_link}"
        
[Sun Nov  1 21:57:04 2020]
Finished job 381.
89 of 833 steps (11%) done

[Sun Nov  1 21:57:04 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_175_5m_0.22-3_prok.bam
    jobid: 165
    wildcards: ID=TARA_175_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_175_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_175_5m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 22:22:17 2020]
Finished job 158.
90 of 833 steps (11%) done

[Sun Nov  1 22:22:17 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_163_5m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_163_5m_0.22-3_prok-gene-coverages.tsv
    jobid: 572
    wildcards: ID=TARA_163_5m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_163_5m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_163_5m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_163_5m_0.22-3_prok-gene-cov.tmp
        
[Sun Nov  1 22:22:27 2020]
Finished job 572.
91 of 833 steps (11%) done

[Sun Nov  1 22:22:28 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_042_5m_0.22-1.6_prok.bam
    jobid: 213
    wildcards: ID=TARA_042_5m_0.22-1.6_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_042_5m_0.22-1.6_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_042_5m_0.22-1.6_prok ${curr_run_accs}
        
[Sun Nov  1 22:23:20 2020]
Finished job 390.
92 of 833 steps (11%) done

[Sun Nov  1 22:23:20 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_018_5m_0.22-1.6_prok.bam
    jobid: 199
    wildcards: ID=TARA_018_5m_0.22-1.6_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_018_5m_0.22-1.6_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_018_5m_0.22-1.6_prok ${curr_run_accs}
        
[Sun Nov  1 22:25:26 2020]
Finished job 401.
93 of 833 steps (11%) done

[Sun Nov  1 22:25:26 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_158_651m_0.22-3_prok.bam
    jobid: 157
    wildcards: ID=TARA_158_651m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_158_651m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_158_651m_0.22-3_prok ${curr_run_accs}
        
[Sun Nov  1 23:23:01 2020]
Finished job 199.
94 of 833 steps (11%) done

[Sun Nov  1 23:23:02 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD18.bam
    jobid: 129
    wildcards: ID=OSD18


        curr_run_accs=$(grep -w -m 1 "^OSD18" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD18 ${curr_run_accs}
        
[Sun Nov  1 23:23:31 2020]
Finished job 213.
95 of 833 steps (11%) done

[Sun Nov  1 23:23:31 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD128.bam
    jobid: 45
    wildcards: ID=OSD128


        curr_run_accs=$(grep -w -m 1 "^OSD128" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD128 ${curr_run_accs}
        
[Sun Nov  1 23:24:01 2020]
Finished job 129.
96 of 833 steps (12%) done

[Sun Nov  1 23:24:01 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_039_5m_0.22-1.6_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-coverages.tsv
    jobid: 712
    wildcards: ID=TARA_039_5m_0.22-1.6_girus


        pileup.sh -in ../mapping-files/TARA_039_5m_0.22-1.6_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov.tmp > ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov-and-det.tmp ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov.tmp
        
[Sun Nov  1 23:24:02 2020]
Error in rule parse_gene_level_cov_and_det:
    jobid: 712
    output: ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-coverages.tsv
    shell:
        
        pileup.sh -in ../mapping-files/TARA_039_5m_0.22-1.6_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov.tmp > ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov-and-det.tmp ../mapping-files/TARA_039_5m_0.22-1.6_girus-gene-cov.tmp
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sun Nov  1 23:24:41 2020]
Finished job 45.
97 of 833 steps (12%) done
[Sun Nov  1 23:46:46 2020]
Finished job 165.
98 of 833 steps (12%) done
[Mon Nov  2 00:40:04 2020]
Finished job 157.
99 of 833 steps (12%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data2/mlee/Thaum/metagenome-dl-and-mapping-workflow/.snakemake/log/2020-11-01T000313.971976.snakemake.log
