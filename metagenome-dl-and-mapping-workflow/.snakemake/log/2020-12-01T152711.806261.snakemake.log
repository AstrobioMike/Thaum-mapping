Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	13	dl_454_sample_and_run_mapping
	25	dl_HK_sample_and_run_mapping
	141	dl_illumina_sample_and_run_mapping
	16	parse_454_gene_level_cov_and_det
	243	parse_gene_level_cov_and_det
	54	parse_gene_level_cov_and_det_HK_samples
	493

[Tue Dec  1 15:27:12 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD78.bam
    jobid: 137
    wildcards: ID=OSD78


        curr_run_accs=$(grep -w -m 1 "^OSD78" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD78 ${curr_run_accs}
        

[Tue Dec  1 15:27:13 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD183.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD183-gene-coverages.tsv
    jobid: 492
    wildcards: ID=OSD183


        pileup.sh -in ../mapping-files/OSD183.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD183-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD183-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD183-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD183-gene-cov.tmp > ../mapping-files/OSD183-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD183-gene-cov-and-det.tmp ../mapping-files/OSD183-gene-cov.tmp
        

[Tue Dec  1 15:27:13 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_123_150m_0.22-0.45_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-coverages.tsv
    jobid: 675
    wildcards: ID=TARA_123_150m_0.22-0.45_girus


        pileup.sh -in ../mapping-files/TARA_123_150m_0.22-0.45_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-cov.tmp > ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-cov-and-det.tmp ../mapping-files/TARA_123_150m_0.22-0.45_girus-gene-cov.tmp
        

[Tue Dec  1 15:27:13 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/A3-09-3500m-34An.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/A3-09-3500m-34An-gene-coverages.tsv
    jobid: 773
    wildcards: ID=A3-09-3500m-34An


        pileup.sh -in ../mapping-files-HK/A3-09-3500m-34An.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/A3-09-3500m-34An-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/A3-09-3500m-34An-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/A3-09-3500m-34An-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/A3-09-3500m-34An-gene-cov.tmp > ../mapping-files-HK/A3-09-3500m-34An-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/A3-09-3500m-34An-gene-cov-and-det.tmp ../mapping-files-HK/A3-09-3500m-34An-gene-cov.tmp
        

[Tue Dec  1 15:27:13 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD55.bam
    jobid: 116
    wildcards: ID=OSD55


        curr_run_accs=$(grep -w -m 1 "^OSD55" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD55 ${curr_run_accs}
        

[Tue Dec  1 15:27:13 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_120m_0.22-0.45_girus.bam
    jobid: 228
    wildcards: ID=TARA_078_120m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_078_120m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_120m_0.22-0.45_girus ${curr_run_accs}
        

[Tue Dec  1 15:27:13 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_145_590m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_145_590m_0.22-3_prok-gene-coverages.tsv
    jobid: 704
    wildcards: ID=TARA_145_590m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_145_590m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_145_590m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_145_590m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_145_590m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_145_590m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_145_590m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_145_590m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_145_590m_0.22-3_prok-gene-cov.tmp
        

[Tue Dec  1 15:27:13 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD56.bam
    jobid: 117
    wildcards: ID=OSD56


        curr_run_accs=$(grep -w -m 1 "^OSD56" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD56 ${curr_run_accs}
        
[Tue Dec  1 15:27:15 2020]
Finished job 773.
1 of 493 steps (0.20%) done

[Tue Dec  1 15:27:15 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_076_150m_0.22-3_prok.bam
    jobid: 222
    wildcards: ID=TARA_076_150m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_076_150m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_150m_0.22-3_prok ${curr_run_accs}
        
[Tue Dec  1 15:27:16 2020]
Finished job 492.
2 of 493 steps (0.41%) done

[Tue Dec  1 15:27:16 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD7.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD7-gene-coverages.tsv
    jobid: 543
    wildcards: ID=OSD7


        pileup.sh -in ../mapping-files/OSD7.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD7-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD7-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD7-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD7-gene-cov.tmp > ../mapping-files/OSD7-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD7-gene-cov-and-det.tmp ../mapping-files/OSD7-gene-cov.tmp
        
[Tue Dec  1 15:27:20 2020]
Finished job 543.
3 of 493 steps (0.61%) done

[Tue Dec  1 15:27:20 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N02-500m-8Ar.bam
    jobid: 390
    wildcards: ID=N02-500m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N02-500m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N02-500m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N02-500m-8Ar "${R1_link}" "${R2_link}"
        
[Tue Dec  1 15:27:25 2020]
Finished job 675.
4 of 493 steps (0.81%) done

[Tue Dec  1 15:27:25 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD15-0.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD15-0-gene-coverages.tsv
    jobid: 460
    wildcards: ID=OSD15-0


        pileup.sh -in ../mapping-files/OSD15-0.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD15-0-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD15-0-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD15-0-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD15-0-gene-cov.tmp > ../mapping-files/OSD15-0-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD15-0-gene-cov-and-det.tmp ../mapping-files/OSD15-0-gene-cov.tmp
        
[Tue Dec  1 15:27:28 2020]
Finished job 460.
5 of 493 steps (1%) done

[Tue Dec  1 15:27:29 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD70.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD70-gene-coverages.tsv
    jobid: 544
    wildcards: ID=OSD70


        pileup.sh -in ../mapping-files/OSD70.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD70-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD70-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD70-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD70-gene-cov.tmp > ../mapping-files/OSD70-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD70-gene-cov-and-det.tmp ../mapping-files/OSD70-gene-cov.tmp
        
[Tue Dec  1 15:27:32 2020]
Finished job 544.
6 of 493 steps (1%) done

[Tue Dec  1 15:27:32 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_076_150m_0.22-0.45_girus.bam
    jobid: 221
    wildcards: ID=TARA_076_150m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_076_150m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_150m_0.22-0.45_girus ${curr_run_accs}
        
[Tue Dec  1 15:27:33 2020]
Finished job 704.
7 of 493 steps (1%) done

[Tue Dec  1 15:27:33 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_076_150m_0.45-0.8_girus.bam
    jobid: 223
    wildcards: ID=TARA_076_150m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_076_150m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_150m_0.45-0.8_girus ${curr_run_accs}
        
[Tue Dec  1 15:28:22 2020]
Finished job 137.
8 of 493 steps (2%) done

[Tue Dec  1 15:28:22 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD149.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD149-gene-coverages.tsv
    jobid: 458
    wildcards: ID=OSD149


        pileup.sh -in ../mapping-files/OSD149.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD149-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD149-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD149-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD149-gene-cov.tmp > ../mapping-files/OSD149-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD149-gene-cov-and-det.tmp ../mapping-files/OSD149-gene-cov.tmp
        
[Tue Dec  1 15:28:25 2020]
Finished job 458.
9 of 493 steps (2%) done

[Tue Dec  1 15:28:25 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N04-0m-8Ar.bam
    jobid: 391
    wildcards: ID=N04-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N04-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N04-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N04-0m-8Ar "${R1_link}" "${R2_link}"
        
[Tue Dec  1 15:28:34 2020]
Finished job 117.
10 of 493 steps (2%) done

[Tue Dec  1 15:28:34 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/UW023-8Ar.bam
    jobid: 405
    wildcards: ID=UW023-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^UW023-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^UW023-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 UW023-8Ar "${R1_link}" "${R2_link}"
        
[Tue Dec  1 15:28:59 2020]
Finished job 116.
11 of 493 steps (2%) done

[Tue Dec  1 15:28:59 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD151.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD151-gene-coverages.tsv
    jobid: 461
    wildcards: ID=OSD151


        pileup.sh -in ../mapping-files/OSD151.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD151-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD151-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD151-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD151-gene-cov.tmp > ../mapping-files/OSD151-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD151-gene-cov-and-det.tmp ../mapping-files/OSD151-gene-cov.tmp
        
[Tue Dec  1 15:29:02 2020]
Finished job 461.
12 of 493 steps (2%) done

[Tue Dec  1 15:29:02 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD71.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD71-gene-coverages.tsv
    jobid: 545
    wildcards: ID=OSD71


        pileup.sh -in ../mapping-files/OSD71.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD71-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD71-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD71-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD71-gene-cov.tmp > ../mapping-files/OSD71-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD71-gene-cov-and-det.tmp ../mapping-files/OSD71-gene-cov.tmp
        
[Tue Dec  1 15:29:05 2020]
Finished job 545.
13 of 493 steps (3%) done

[Tue Dec  1 15:29:06 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_072_800m_0.22-3_prok.bam
    jobid: 220
    wildcards: ID=TARA_072_800m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_072_800m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_072_800m_0.22-3_prok ${curr_run_accs}
        
[Tue Dec  1 16:27:51 2020]
Finished job 390.
14 of 493 steps (3%) done

[Tue Dec  1 16:27:52 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/R16E-300m-9Ar.bam
    jobid: 401
    wildcards: ID=R16E-300m-9Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^R16E-300m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^R16E-300m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 R16E-300m-9Ar "${R1_link}" "${R2_link}"
        
[Tue Dec  1 16:30:50 2020]
Finished job 405.
15 of 493 steps (3%) done

[Tue Dec  1 16:30:50 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_076_5m_0.22-0.45_girus.bam
    jobid: 224
    wildcards: ID=TARA_076_5m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_076_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_5m_0.22-0.45_girus ${curr_run_accs}
        
[Tue Dec  1 16:31:35 2020]
Finished job 391.
16 of 493 steps (3%) done

[Tue Dec  1 16:31:35 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_072_5m_0.22-3_prok.bam
    jobid: 219
    wildcards: ID=TARA_072_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_072_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_072_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Dec  1 16:46:46 2020]
Finished job 401.
17 of 493 steps (3%) done

[Tue Dec  1 16:46:47 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_124_120m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 681
    wildcards: ID=TARA_124_120m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_124_120m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_124_120m_0.45-0.8_girus-gene-cov.tmp
        
[Tue Dec  1 16:47:06 2020]
Finished job 681.
18 of 493 steps (4%) done

[Tue Dec  1 16:47:06 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD152-1.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD152-1-gene-coverages.tsv
    jobid: 462
    wildcards: ID=OSD152-1


        pileup.sh -in ../mapping-files/OSD152-1.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD152-1-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD152-1-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD152-1-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD152-1-gene-cov.tmp > ../mapping-files/OSD152-1-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD152-1-gene-cov-and-det.tmp ../mapping-files/OSD152-1-gene-cov.tmp
        
[Tue Dec  1 16:47:10 2020]
Finished job 462.
19 of 493 steps (4%) done

[Tue Dec  1 16:47:10 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_124_120m_0.22-0.45_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-coverages.tsv
    jobid: 680
    wildcards: ID=TARA_124_120m_0.22-0.45_girus


        pileup.sh -in ../mapping-files/TARA_124_120m_0.22-0.45_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-cov.tmp > ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-cov-and-det.tmp ../mapping-files/TARA_124_120m_0.22-0.45_girus-gene-cov.tmp
        
[Tue Dec  1 16:47:49 2020]
Finished job 680.
20 of 493 steps (4%) done

[Tue Dec  1 16:47:49 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_076_5m_0.45-0.8_girus.bam
    jobid: 225
    wildcards: ID=TARA_076_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_076_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_5m_0.45-0.8_girus ${curr_run_accs}
        
[Tue Dec  1 18:12:52 2020]
Finished job 220.
21 of 493 steps (4%) done

[Tue Dec  1 18:12:52 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD64.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD64-gene-coverages.tsv
    jobid: 540
    wildcards: ID=OSD64


        pileup.sh -in ../mapping-files/OSD64.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD64-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD64-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD64-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD64-gene-cov.tmp > ../mapping-files/OSD64-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD64-gene-cov-and-det.tmp ../mapping-files/OSD64-gene-cov.tmp
        
[Tue Dec  1 18:13:00 2020]
Finished job 540.
22 of 493 steps (4%) done

[Tue Dec  1 18:13:00 2020]
rule dl_HK_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/R16E-1000m-9Ar.bam
    jobid: 400
    wildcards: ID=R16E-1000m-9Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^R16E-1000m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^R16E-1000m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 R16E-1000m-9Ar "${R1_link}" "${R2_link}"
        
[Tue Dec  1 18:26:14 2020]
Finished job 400.
23 of 493 steps (5%) done

[Tue Dec  1 18:26:14 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_072_100m_0.22-3_prok.bam
    jobid: 218
    wildcards: ID=TARA_072_100m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_072_100m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_072_100m_0.22-3_prok ${curr_run_accs}
        
[Tue Dec  1 19:34:27 2020]
Finished job 222.
24 of 493 steps (5%) done

[Tue Dec  1 19:34:27 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_124_120m_0.1-0.22_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-coverages.tsv
    jobid: 679
    wildcards: ID=TARA_124_120m_0.1-0.22_girus


        pileup.sh -in ../mapping-files/TARA_124_120m_0.1-0.22_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-cov.tmp > ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-cov-and-det.tmp ../mapping-files/TARA_124_120m_0.1-0.22_girus-gene-cov.tmp
        
[Tue Dec  1 19:34:38 2020]
Finished job 679.
25 of 493 steps (5%) done

[Tue Dec  1 19:34:38 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_151_80m_0.22-3_prok.bam
    jobid: 295
    wildcards: ID=TARA_151_80m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_151_80m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_151_80m_0.22-3_prok ${curr_run_accs}
        
[Tue Dec  1 20:02:20 2020]
Finished job 219.
26 of 493 steps (5%) done

[Tue Dec  1 20:02:21 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD152-5.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD152-5-gene-coverages.tsv
    jobid: 463
    wildcards: ID=OSD152-5


        pileup.sh -in ../mapping-files/OSD152-5.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD152-5-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD152-5-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD152-5-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD152-5-gene-cov.tmp > ../mapping-files/OSD152-5-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD152-5-gene-cov-and-det.tmp ../mapping-files/OSD152-5-gene-cov.tmp
        
[Tue Dec  1 20:02:32 2020]
Finished job 463.
27 of 493 steps (5%) done

[Tue Dec  1 20:02:32 2020]
rule dl_illumina_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_076_800m_0.22-3_prok.bam
    jobid: 226
    wildcards: ID=TARA_076_800m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_076_800m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_800m_0.22-3_prok ${curr_run_accs}
        
Terminating processes on user request, this might take some time.
[Tue Dec  1 20:09:48 2020]
Error in rule dl_illumina_sample_and_run_mapping:
[Tue Dec  1 20:09:48 2020]
[Tue Dec  1 20:09:48 2020]
    jobid: 225
Error in rule dl_illumina_sample_and_run_mapping:
Error in rule dl_illumina_sample_and_run_mapping:
    output: ../mapping-files/TARA_076_5m_0.45-0.8_girus.bam
[Tue Dec  1 20:09:48 2020]
    jobid: 221
[Tue Dec  1 20:09:48 2020]
    jobid: 224
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_076_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_5m_0.45-0.8_girus ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Error in rule dl_illumina_sample_and_run_mapping:
    output: ../mapping-files/TARA_076_150m_0.22-0.45_girus.bam
Error in rule dl_illumina_sample_and_run_mapping:
    output: ../mapping-files/TARA_076_5m_0.22-0.45_girus.bam

    jobid: 223
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_076_150m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_150m_0.22-0.45_girus ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    jobid: 228
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_076_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_5m_0.22-0.45_girus ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Removing output files of failed job dl_illumina_sample_and_run_mapping since they might be corrupted:
../mapping-files/TARA_076_5m_0.45-0.8_girus.bam
    output: ../mapping-files/TARA_076_150m_0.45-0.8_girus.bam

    output: ../mapping-files/TARA_078_120m_0.22-0.45_girus.bam

    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_076_150m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_076_150m_0.45-0.8_girus ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_078_120m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_120m_0.22-0.45_girus ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)


Removing output files of failed job dl_illumina_sample_and_run_mapping since they might be corrupted:
../mapping-files/TARA_076_150m_0.22-0.45_girus.bam
Removing output files of failed job dl_illumina_sample_and_run_mapping since they might be corrupted:
../mapping-files/TARA_076_5m_0.22-0.45_girus.bam
Removing output files of failed job dl_illumina_sample_and_run_mapping since they might be corrupted:
../mapping-files/TARA_076_150m_0.45-0.8_girus.bam
Removing output files of failed job dl_illumina_sample_and_run_mapping since they might be corrupted:
../mapping-files/TARA_078_120m_0.22-0.45_girus.bam
[Tue Dec  1 20:10:02 2020]
Finished job 295.
28 of 493 steps (6%) done
[Tue Dec  1 20:12:27 2020]
Error in rule dl_illumina_sample_and_run_mapping:
    jobid: 218
    output: ../mapping-files/TARA_072_100m_0.22-3_prok.bam
    shell:
        
        curr_run_accs=$(grep -w -m 1 "^TARA_072_100m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_072_100m_0.22-3_prok ${curr_run_accs}
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Cancelling snakemake on user request.
