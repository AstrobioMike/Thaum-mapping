Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	284	dl_sample_and_run_mapping
	55	dl_sample_and_run_mapping_HK_samples
	346	parse_gene_level_cov_and_det
	60	parse_gene_level_cov_and_det_HK_samples
	1	run_KO_annotation
	747

[Mon Nov  2 10:38:42 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD2.bam
    jobid: 142
    wildcards: ID=OSD2


        curr_run_accs=$(grep -w -m 1 "^OSD2" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD2 ${curr_run_accs}
        

[Mon Nov  2 10:38:42 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A4-07-0m-34An.bam
    jobid: 396
    wildcards: ID=A4-07-0m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A4-07-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A4-07-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A4-07-0m-34An "${R1_link}" "${R2_link}"
        

[Mon Nov  2 10:38:42 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_039_270m_0.22-1.6_girus.bam
    jobid: 300
    wildcards: ID=TARA_039_270m_0.22-1.6_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_039_270m_0.22-1.6_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_039_270m_0.22-1.6_girus ${curr_run_accs}
        

[Mon Nov  2 10:38:42 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/UW042-0m-34An.bam
    jobid: 398
    wildcards: ID=UW042-0m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^UW042-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^UW042-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 UW042-0m-34An "${R1_link}" "${R2_link}"
        
[Mon Nov  2 10:39:14 2020]
Finished job 300.
1 of 747 steps (0.13%) done

[Mon Nov  2 10:39:14 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD154.bam
    jobid: 28
    wildcards: ID=OSD154


        curr_run_accs=$(grep -w -m 1 "^OSD154" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD154 ${curr_run_accs}
        
[Mon Nov  2 10:39:31 2020]
Finished job 142.
2 of 747 steps (0.27%) done

[Mon Nov  2 10:39:31 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD171.bam
    jobid: 14
    wildcards: ID=OSD171


        curr_run_accs=$(grep -w -m 1 "^OSD171" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD171 ${curr_run_accs}
        
[Mon Nov  2 10:41:00 2020]
Finished job 14.
3 of 747 steps (0.40%) done
[Mon Nov  2 10:41:00 2020]
Finished job 28.
4 of 747 steps (0.54%) done

[Mon Nov  2 10:41:00 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_125_5m_0.1-0.22_girus.bam
    jobid: 350
    wildcards: ID=TARA_125_5m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_125_5m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_125_5m_0.1-0.22_girus ${curr_run_accs}
        

[Mon Nov  2 10:41:00 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD52.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD52-gene-coverages.tsv
    jobid: 517
    wildcards: ID=OSD52


        pileup.sh -in ../mapping-files/OSD52.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD52-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD52-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD52-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD52-gene-cov.tmp > ../mapping-files/OSD52-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD52-gene-cov-and-det.tmp ../mapping-files/OSD52-gene-cov.tmp
        
[Mon Nov  2 10:41:06 2020]
Finished job 517.
5 of 747 steps (0.67%) done

[Mon Nov  2 10:41:06 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N07-0m-8Ar.bam
    jobid: 364
    wildcards: ID=N07-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N07-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N07-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N07-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 10:46:23 2020]
Finished job 396.
6 of 747 steps (0.80%) done

[Mon Nov  2 10:46:23 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_124_120m_0.45-0.8_girus.bam
    jobid: 349
    wildcards: ID=TARA_124_120m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_124_120m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_124_120m_0.45-0.8_girus ${curr_run_accs}
        
[Mon Nov  2 11:21:10 2020]
Finished job 364.
7 of 747 steps (0.94%) done

[Mon Nov  2 11:21:11 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD51.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD51-gene-coverages.tsv
    jobid: 518
    wildcards: ID=OSD51


        pileup.sh -in ../mapping-files/OSD51.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD51-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD51-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD51-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD51-gene-cov.tmp > ../mapping-files/OSD51-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD51-gene-cov-and-det.tmp ../mapping-files/OSD51-gene-cov.tmp
        
[Mon Nov  2 11:21:19 2020]
Finished job 518.
8 of 747 steps (1%) done

[Mon Nov  2 11:21:19 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_125_5m_0.22-0.45_girus.bam
    jobid: 351
    wildcards: ID=TARA_125_5m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_125_5m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_125_5m_0.22-0.45_girus ${curr_run_accs}
        
[Mon Nov  2 11:32:27 2020]
Finished job 350.
9 of 747 steps (1%) done

[Mon Nov  2 11:32:27 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N04-0m-8Ar.bam
    jobid: 363
    wildcards: ID=N04-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N04-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N04-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N04-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 11:52:34 2020]
Finished job 398.
10 of 747 steps (1%) done

[Mon Nov  2 11:52:34 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD155.bam
    jobid: 27
    wildcards: ID=OSD155


        curr_run_accs=$(grep -w -m 1 "^OSD155" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD155 ${curr_run_accs}
        
[Mon Nov  2 11:54:03 2020]
Finished job 27.
11 of 747 steps (1%) done

[Mon Nov  2 11:54:03 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD172.bam
    jobid: 13
    wildcards: ID=OSD172


        curr_run_accs=$(grep -w -m 1 "^OSD172" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD172 ${curr_run_accs}
        
[Mon Nov  2 11:57:57 2020]
Finished job 13.
12 of 747 steps (2%) done

[Mon Nov  2 11:57:57 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD53.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD53-gene-coverages.tsv
    jobid: 516
    wildcards: ID=OSD53


        pileup.sh -in ../mapping-files/OSD53.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD53-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD53-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD53-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD53-gene-cov.tmp > ../mapping-files/OSD53-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD53-gene-cov-and-det.tmp ../mapping-files/OSD53-gene-cov.tmp
        
[Mon Nov  2 11:58:05 2020]
Finished job 516.
13 of 747 steps (2%) done

[Mon Nov  2 11:58:05 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD170.bam
    jobid: 15
    wildcards: ID=OSD170


        curr_run_accs=$(grep -w -m 1 "^OSD170" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD170 ${curr_run_accs}
        
[Mon Nov  2 11:59:04 2020]
Finished job 363.
14 of 747 steps (2%) done

[Mon Nov  2 11:59:04 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD153.bam
    jobid: 29
    wildcards: ID=OSD153


        curr_run_accs=$(grep -w -m 1 "^OSD153" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD153 ${curr_run_accs}
        
[Mon Nov  2 12:00:04 2020]
Finished job 15.
15 of 747 steps (2%) done

[Mon Nov  2 12:00:05 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_124_120m_0.22-0.45_girus.bam
    jobid: 348
    wildcards: ID=TARA_124_120m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_124_120m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_124_120m_0.22-0.45_girus ${curr_run_accs}
        
[Mon Nov  2 12:00:54 2020]
Finished job 29.
16 of 747 steps (2%) done

[Mon Nov  2 12:00:55 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N02-0m-8Ar.bam
    jobid: 362
    wildcards: ID=N02-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N02-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N02-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N02-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 12:35:13 2020]
Finished job 349.
17 of 747 steps (2%) done

[Mon Nov  2 12:35:13 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD156.bam
    jobid: 26
    wildcards: ID=OSD156


        curr_run_accs=$(grep -w -m 1 "^OSD156" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD156 ${curr_run_accs}
        
[Mon Nov  2 12:35:46 2020]
Finished job 362.
18 of 747 steps (2%) done

[Mon Nov  2 12:35:46 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/P06-0m-8Ar.bam
    jobid: 365
    wildcards: ID=P06-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^P06-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^P06-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 P06-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 12:37:34 2020]
Finished job 26.
19 of 747 steps (3%) done

[Mon Nov  2 12:37:34 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD173.bam
    jobid: 12
    wildcards: ID=OSD173


        curr_run_accs=$(grep -w -m 1 "^OSD173" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD173 ${curr_run_accs}
        
[Mon Nov  2 12:39:28 2020]
Finished job 12.
20 of 747 steps (3%) done

[Mon Nov  2 12:39:28 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/B08-1000m-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/B08-1000m-8Ar-gene-coverages.tsv
    jobid: 795
    wildcards: ID=B08-1000m-8Ar


        pileup.sh -in ../mapping-files-HK/B08-1000m-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/B08-1000m-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/B08-1000m-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/B08-1000m-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/B08-1000m-8Ar-gene-cov.tmp > ../mapping-files-HK/B08-1000m-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/B08-1000m-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/B08-1000m-8Ar-gene-cov.tmp
        
[Mon Nov  2 12:39:36 2020]
Finished job 795.
21 of 747 steps (3%) done

[Mon Nov  2 12:39:36 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_124_120m_0.1-0.22_girus.bam
    jobid: 347
    wildcards: ID=TARA_124_120m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_124_120m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_124_120m_0.1-0.22_girus ${curr_run_accs}
        
[Mon Nov  2 13:05:49 2020]
Finished job 365.
22 of 747 steps (3%) done

[Mon Nov  2 13:05:50 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD50.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD50-gene-coverages.tsv
    jobid: 519
    wildcards: ID=OSD50


        pileup.sh -in ../mapping-files/OSD50.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD50-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD50-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD50-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD50-gene-cov.tmp > ../mapping-files/OSD50-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD50-gene-cov-and-det.tmp ../mapping-files/OSD50-gene-cov.tmp
        
[Mon Nov  2 13:05:58 2020]
Finished job 519.
23 of 747 steps (3%) done

[Mon Nov  2 13:05:58 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/UW012-0m-8Ar.bam
    jobid: 366
    wildcards: ID=UW012-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^UW012-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^UW012-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 UW012-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 13:31:43 2020]
Finished job 366.
24 of 747 steps (3%) done

[Mon Nov  2 13:31:43 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_125_5m_0.45-0.8_girus.bam
    jobid: 352
    wildcards: ID=TARA_125_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_125_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_125_5m_0.45-0.8_girus ${curr_run_accs}
        
[Mon Nov  2 13:41:24 2020]
Finished job 347.
25 of 747 steps (3%) done

[Mon Nov  2 13:41:25 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/K3-8Ar.bam
    jobid: 361
    wildcards: ID=K3-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^K3-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^K3-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 K3-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 13:52:40 2020]
Finished job 361.
26 of 747 steps (3%) done

[Mon Nov  2 13:52:40 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD169.bam
    jobid: 16
    wildcards: ID=OSD169


        curr_run_accs=$(grep -w -m 1 "^OSD169" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD169 ${curr_run_accs}
        
[Mon Nov  2 13:54:22 2020]
Finished job 16.
27 of 747 steps (4%) done

[Mon Nov  2 13:54:22 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD174.bam
    jobid: 11
    wildcards: ID=OSD174


        curr_run_accs=$(grep -w -m 1 "^OSD174" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD174 ${curr_run_accs}
        
[Mon Nov  2 13:55:23 2020]
Finished job 11.
28 of 747 steps (4%) done

[Mon Nov  2 13:55:24 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD157.bam
    jobid: 25
    wildcards: ID=OSD157


        curr_run_accs=$(grep -w -m 1 "^OSD157" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD157 ${curr_run_accs}
        
[Mon Nov  2 13:57:35 2020]
Finished job 25.
29 of 747 steps (4%) done

[Mon Nov  2 13:57:35 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD158.bam
    jobid: 24
    wildcards: ID=OSD158


        curr_run_accs=$(grep -w -m 1 "^OSD158" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD158 ${curr_run_accs}
        
[Mon Nov  2 14:00:17 2020]
Finished job 24.
30 of 747 steps (4%) done

[Mon Nov  2 14:00:17 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD175.bam
    jobid: 10
    wildcards: ID=OSD175


        curr_run_accs=$(grep -w -m 1 "^OSD175" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD175 ${curr_run_accs}
        
[Mon Nov  2 14:01:08 2020]
Finished job 10.
31 of 747 steps (4%) done

[Mon Nov  2 14:01:08 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/ICE04-0m-9Ar.bam
    jobid: 360
    wildcards: ID=ICE04-0m-9Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^ICE04-0m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^ICE04-0m-9Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 ICE04-0m-9Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 14:10:39 2020]
Finished job 348.
32 of 747 steps (4%) done

[Mon Nov  2 14:10:39 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/G02-7Ar.bam
    jobid: 359
    wildcards: ID=G02-7Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^G02-7Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^G02-7Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 G02-7Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 14:11:34 2020]
Finished job 360.
33 of 747 steps (4%) done

[Mon Nov  2 14:11:34 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD152-1.bam
    jobid: 30
    wildcards: ID=OSD152-1


        curr_run_accs=$(grep -w -m 1 "^OSD152-1" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD152-1 ${curr_run_accs}
        
[Mon Nov  2 14:12:57 2020]
Finished job 30.
34 of 747 steps (5%) done

[Mon Nov  2 14:12:58 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/BB08-0m-8Ar.bam
    jobid: 358
    wildcards: ID=BB08-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^BB08-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^BB08-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 BB08-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 14:19:46 2020]
Finished job 358.
35 of 747 steps (5%) done

[Mon Nov  2 14:19:46 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD162.bam
    jobid: 22
    wildcards: ID=OSD162


        curr_run_accs=$(grep -w -m 1 "^OSD162" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD162 ${curr_run_accs}
        
[Mon Nov  2 14:20:33 2020]
Finished job 359.
36 of 747 steps (5%) done

[Mon Nov  2 14:20:33 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/B08-0m-8Ar.bam
    jobid: 357
    wildcards: ID=B08-0m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^B08-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^B08-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 B08-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 14:21:16 2020]
Finished job 22.
37 of 747 steps (5%) done

[Mon Nov  2 14:21:16 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD163.bam
    jobid: 21
    wildcards: ID=OSD163


        curr_run_accs=$(grep -w -m 1 "^OSD163" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD163 ${curr_run_accs}
        
[Mon Nov  2 14:22:42 2020]
Finished job 21.
38 of 747 steps (5%) done

[Mon Nov  2 14:22:43 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD178.bam
    jobid: 7
    wildcards: ID=OSD178


        curr_run_accs=$(grep -w -m 1 "^OSD178" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD178 ${curr_run_accs}
        
[Mon Nov  2 14:23:28 2020]
Finished job 7.
39 of 747 steps (5%) done

[Mon Nov  2 14:23:28 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD49.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD49-gene-coverages.tsv
    jobid: 520
    wildcards: ID=OSD49


        pileup.sh -in ../mapping-files/OSD49.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD49-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD49-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD49-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD49-gene-cov.tmp > ../mapping-files/OSD49-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD49-gene-cov-and-det.tmp ../mapping-files/OSD49-gene-cov.tmp
        
[Mon Nov  2 14:23:36 2020]
Finished job 520.
40 of 747 steps (5%) done

[Mon Nov  2 14:23:37 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/UW022-8Ar.bam
    jobid: 367
    wildcards: ID=UW022-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^UW022-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^UW022-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 UW022-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 14:29:13 2020]
Finished job 357.
41 of 747 steps (5%) done

[Mon Nov  2 14:29:13 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_123_150m_0.22-0.45_girus.bam
    jobid: 342
    wildcards: ID=TARA_123_150m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_123_150m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_123_150m_0.22-0.45_girus ${curr_run_accs}
        
[Mon Nov  2 14:32:15 2020]
Finished job 351.
42 of 747 steps (6%) done

[Mon Nov  2 14:32:15 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/AT04-0m-8Ar.bam
    jobid: 356
    wildcards: ID=AT04-0m-8Ar
[Mon Nov  2 14:39:52 2020]

Finished job 367.
43 of 747 steps (6%) done

        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^AT04-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^AT04-0m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 AT04-0m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 21:18:56 2020]
Finished job 352.
44 of 747 steps (6%) done
[Mon Nov  2 21:18:56 2020]
Finished job 342.
45 of 747 steps (6%) done

[Mon Nov  2 21:18:57 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/K3-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/K3-8Ar-gene-coverages.tsv
    jobid: 775
    wildcards: ID=K3-8Ar


        pileup.sh -in ../mapping-files-HK/K3-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/K3-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/K3-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/K3-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/K3-8Ar-gene-cov.tmp > ../mapping-files-HK/K3-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/K3-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/K3-8Ar-gene-cov.tmp
        

[Mon Nov  2 21:18:57 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A3-09-3500m-34An.bam
    jobid: 414
    wildcards: ID=A3-09-3500m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A3-09-3500m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A3-09-3500m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A3-09-3500m-34An "${R1_link}" "${R2_link}"
        

[Mon Nov  2 21:18:57 2020]
rule parse_gene_level_cov_and_det_HK_samples:
    input: ../mapping-files-HK/N07-0m-8Ar.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files-HK/N07-0m-8Ar-gene-coverages.tsv
    jobid: 778
    wildcards: ID=N07-0m-8Ar


        pileup.sh -in ../mapping-files-HK/N07-0m-8Ar.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files-HK/N07-0m-8Ar-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files-HK/N07-0m-8Ar-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files-HK/N07-0m-8Ar-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files-HK/N07-0m-8Ar-gene-cov.tmp > ../mapping-files-HK/N07-0m-8Ar-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files-HK/N07-0m-8Ar-gene-cov-and-det.tmp ../mapping-files-HK/N07-0m-8Ar-gene-cov.tmp
        
[Mon Nov  2 21:19:04 2020]
Finished job 775.
46 of 747 steps (6%) done
[Mon Nov  2 21:19:05 2020]
Finished job 778.
47 of 747 steps (6%) done

[Mon Nov  2 21:19:05 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD182.bam
    jobid: 6
    wildcards: ID=OSD182


        curr_run_accs=$(grep -w -m 1 "^OSD182" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD182 ${curr_run_accs}
        

[Mon Nov  2 21:19:05 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD61.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD61-gene-coverages.tsv
    jobid: 509
    wildcards: ID=OSD61


        pileup.sh -in ../mapping-files/OSD61.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD61-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD61-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD61-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD61-gene-cov.tmp > ../mapping-files/OSD61-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD61-gene-cov-and-det.tmp ../mapping-files/OSD61-gene-cov.tmp
        
[Mon Nov  2 21:19:11 2020]
Finished job 509.
48 of 747 steps (6%) done

[Mon Nov  2 21:19:11 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD165.bam
    jobid: 20
    wildcards: ID=OSD165


        curr_run_accs=$(grep -w -m 1 "^OSD165" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD165 ${curr_run_accs}
        
[Mon Nov  2 21:20:40 2020]
Finished job 6.
49 of 747 steps (7%) done

[Mon Nov  2 21:20:40 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD168.bam
    jobid: 17
    wildcards: ID=OSD168


        curr_run_accs=$(grep -w -m 1 "^OSD168" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD168 ${curr_run_accs}
        
[Mon Nov  2 21:20:56 2020]
Finished job 20.
50 of 747 steps (7%) done

[Mon Nov  2 21:20:56 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_125_140m_0.45-0.8_girus.bam
    jobid: 355
    wildcards: ID=TARA_125_140m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_125_140m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_125_140m_0.45-0.8_girus ${curr_run_accs}
        
[Mon Nov  2 21:23:51 2020]
Finished job 17.
51 of 747 steps (7%) done

[Mon Nov  2 21:23:51 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD166.bam
    jobid: 19
    wildcards: ID=OSD166


        curr_run_accs=$(grep -w -m 1 "^OSD166" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD166 ${curr_run_accs}
        
[Mon Nov  2 21:25:26 2020]
Finished job 19.
52 of 747 steps (7%) done

[Mon Nov  2 21:25:26 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD183.bam
    jobid: 5
    wildcards: ID=OSD183


        curr_run_accs=$(grep -w -m 1 "^OSD183" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD183 ${curr_run_accs}
        
[Mon Nov  2 21:26:15 2020]
Finished job 5.
53 of 747 steps (7%) done

[Mon Nov  2 21:26:15 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD152-5.bam
    jobid: 31
    wildcards: ID=OSD152-5


        curr_run_accs=$(grep -w -m 1 "^OSD152-5" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD152-5 ${curr_run_accs}
        
[Mon Nov  2 21:28:01 2020]
Finished job 31.
54 of 747 steps (7%) done

[Mon Nov  2 21:28:01 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD62.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD62-gene-coverages.tsv
    jobid: 508
    wildcards: ID=OSD62


        pileup.sh -in ../mapping-files/OSD62.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD62-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD62-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD62-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD62-gene-cov.tmp > ../mapping-files/OSD62-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD62-gene-cov-and-det.tmp ../mapping-files/OSD62-gene-cov.tmp
        
[Mon Nov  2 21:28:05 2020]
Finished job 508.
55 of 747 steps (7%) done

[Mon Nov  2 21:28:05 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_125_140m_0.1-0.22_girus.bam
    jobid: 353
    wildcards: ID=TARA_125_140m_0.1-0.22_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_125_140m_0.1-0.22_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_125_140m_0.1-0.22_girus ${curr_run_accs}
        
[Mon Nov  2 21:29:11 2020]
Finished job 356.
56 of 747 steps (7%) done

[Mon Nov  2 21:29:11 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_125_140m_0.22-0.45_girus.bam
    jobid: 354
    wildcards: ID=TARA_125_140m_0.22-0.45_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_125_140m_0.22-0.45_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_125_140m_0.22-0.45_girus ${curr_run_accs}
        
[Mon Nov  2 21:42:00 2020]
Finished job 414.
57 of 747 steps (8%) done

[Mon Nov  2 21:42:01 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD167.bam
    jobid: 18
    wildcards: ID=OSD167


        curr_run_accs=$(grep -w -m 1 "^OSD167" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD167 ${curr_run_accs}
        
[Mon Nov  2 21:45:41 2020]
Finished job 18.
58 of 747 steps (8%) done

[Mon Nov  2 21:45:42 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD184.bam
    jobid: 4
    wildcards: ID=OSD184


        curr_run_accs=$(grep -w -m 1 "^OSD184" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD184 ${curr_run_accs}
        
[Mon Nov  2 21:47:54 2020]
Finished job 4.
59 of 747 steps (8%) done

[Mon Nov  2 21:47:54 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD48.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD48-gene-coverages.tsv
    jobid: 521
    wildcards: ID=OSD48


        pileup.sh -in ../mapping-files/OSD48.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD48-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD48-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD48-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD48-gene-cov.tmp > ../mapping-files/OSD48-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD48-gene-cov-and-det.tmp ../mapping-files/OSD48-gene-cov.tmp
        
[Mon Nov  2 21:48:05 2020]
Finished job 521.
60 of 747 steps (8%) done

[Mon Nov  2 21:48:06 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD108.bam
    jobid: 60
    wildcards: ID=OSD108


        curr_run_accs=$(grep -w -m 1 "^OSD108" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD108 ${curr_run_accs}
        
[Mon Nov  2 21:49:17 2020]
Finished job 60.
61 of 747 steps (8%) done

[Mon Nov  2 21:49:17 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_124_5m_0.22-0.45_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-coverages.tsv
    jobid: 759
    wildcards: ID=TARA_124_5m_0.22-0.45_girus


        pileup.sh -in ../mapping-files/TARA_124_5m_0.22-0.45_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-cov.tmp > ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-cov-and-det.tmp ../mapping-files/TARA_124_5m_0.22-0.45_girus-gene-cov.tmp
        
[Mon Nov  2 21:49:27 2020]
Finished job 759.
62 of 747 steps (8%) done

[Mon Nov  2 21:49:27 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD7.bam
    jobid: 137
    wildcards: ID=OSD7


        curr_run_accs=$(grep -w -m 1 "^OSD7" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD7 ${curr_run_accs}
        
[Mon Nov  2 21:51:13 2020]
Finished job 137.
63 of 747 steps (8%) done

[Mon Nov  2 21:51:13 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_062_5m_0.22-3_prok.bam
    jobid: 221
    wildcards: ID=TARA_062_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_062_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_062_5m_0.22-3_prok ${curr_run_accs}
        
[Mon Nov  2 23:15:20 2020]
Finished job 353.
64 of 747 steps (9%) done

[Mon Nov  2 23:15:20 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/AT04-3000m-8Ar.bam
    jobid: 389
    wildcards: ID=AT04-3000m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^AT04-3000m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^AT04-3000m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 AT04-3000m-8Ar "${R1_link}" "${R2_link}"
        
[Mon Nov  2 23:23:29 2020]
Finished job 389.
65 of 747 steps (9%) done

[Mon Nov  2 23:23:30 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD5-75.bam
    jobid: 138
    wildcards: ID=OSD5-75


        curr_run_accs=$(grep -w -m 1 "^OSD5-75" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD5-75 ${curr_run_accs}
        
[Mon Nov  2 23:24:37 2020]
Finished job 138.
66 of 747 steps (9%) done

[Mon Nov  2 23:24:37 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_064_5m_0.22-3_prok.bam
    jobid: 222
    wildcards: ID=TARA_064_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_064_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_064_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 00:02:09 2020]
Finished job 221.
67 of 747 steps (9%) done

[Tue Nov  3 00:02:10 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/B08-3200m-8Ar.bam
    jobid: 390
    wildcards: ID=B08-3200m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^B08-3200m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^B08-3200m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 B08-3200m-8Ar "${R1_link}" "${R2_link}"
        
[Tue Nov  3 00:14:35 2020]
Finished job 222.
68 of 747 steps (9%) done

[Tue Nov  3 00:14:35 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD5-1.bam
    jobid: 139
    wildcards: ID=OSD5-1


        curr_run_accs=$(grep -w -m 1 "^OSD5-1" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD5-1 ${curr_run_accs}
        
[Tue Nov  3 00:14:55 2020]
Finished job 390.
69 of 747 steps (9%) done

[Tue Nov  3 00:14:55 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_064_1000m_0.22-3_prok.bam
    jobid: 223
    wildcards: ID=TARA_064_1000m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_064_1000m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_064_1000m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 00:15:19 2020]
Finished job 139.
70 of 747 steps (9%) done

[Tue Nov  3 00:15:19 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD4.bam
    jobid: 140
    wildcards: ID=OSD4


        curr_run_accs=$(grep -w -m 1 "^OSD4" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD4 ${curr_run_accs}
        
[Tue Nov  3 00:16:00 2020]
Finished job 140.
71 of 747 steps (10%) done

[Tue Nov  3 00:16:00 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_064_65m_0.22-3_prok.bam
    jobid: 224
    wildcards: ID=TARA_064_65m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_064_65m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_064_65m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 00:19:19 2020]
Finished job 355.
72 of 747 steps (10%) done

[Tue Nov  3 00:19:19 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/BB08-3300m-8Ar.bam
    jobid: 392
    wildcards: ID=BB08-3300m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^BB08-3300m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^BB08-3300m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 BB08-3300m-8Ar "${R1_link}" "${R2_link}"
        
[Tue Nov  3 00:19:20 2020]
Finished job 354.
73 of 747 steps (10%) done

[Tue Nov  3 00:19:20 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD3.bam
    jobid: 141
    wildcards: ID=OSD3


        curr_run_accs=$(grep -w -m 1 "^OSD3" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD3 ${curr_run_accs}
        
[Tue Nov  3 00:20:24 2020]
Finished job 141.
74 of 747 steps (10%) done

[Tue Nov  3 00:20:24 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_065_5m_0.22-3_prok.bam
    jobid: 225
    wildcards: ID=TARA_065_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_065_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_065_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 00:27:34 2020]
Finished job 392.
75 of 747 steps (10%) done

[Tue Nov  3 00:27:34 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N04-3800m-8Ar.bam
    jobid: 393
    wildcards: ID=N04-3800m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N04-3800m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N04-3800m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N04-3800m-8Ar "${R1_link}" "${R2_link}"
        
[Tue Nov  3 00:38:28 2020]
Finished job 393.
76 of 747 steps (10%) done

[Tue Nov  3 00:38:29 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_065_850m_0.22-3_prok.bam
    jobid: 226
    wildcards: ID=TARA_065_850m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_065_850m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_065_850m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 00:48:56 2020]
Finished job 223.
77 of 747 steps (10%) done

[Tue Nov  3 00:48:56 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/N07-3800m-8Ar.bam
    jobid: 394
    wildcards: ID=N07-3800m-8Ar


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^N07-3800m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^N07-3800m-8Ar" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 N07-3800m-8Ar "${R1_link}" "${R2_link}"
        
[Tue Nov  3 01:01:16 2020]
Finished job 225.
78 of 747 steps (10%) done

[Tue Nov  3 01:01:16 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD1.bam
    jobid: 143
    wildcards: ID=OSD1


        curr_run_accs=$(grep -w -m 1 "^OSD1" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD1 ${curr_run_accs}
        
[Tue Nov  3 01:02:26 2020]
Finished job 143.
79 of 747 steps (11%) done

[Tue Nov  3 01:02:26 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_065_30m_0.22-3_prok.bam
    jobid: 227
    wildcards: ID=TARA_065_30m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_065_30m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_065_30m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 01:16:32 2020]
Finished job 394.
80 of 747 steps (11%) done

[Tue Nov  3 01:16:32 2020]
rule dl_sample_and_run_mapping_HK_samples:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files-HK/A3-09-0m-34An.bam
    jobid: 395
    wildcards: ID=A3-09-0m-34An


        # getting links to forward and reverse reads
        forward_SRR_acc=$(grep "^A3-09-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 2)
        reverse_SRR_acc=$(grep "^A3-09-0m-34An" HK-sample-and-run-accessions.tsv | cut -f 3)

        R1_link=$(grep "^${forward_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)
        R2_link=$(grep "^${reverse_SRR_acc}" HK-SRRs-and-links.tsv | cut -f 2)

        bash scripts/dl-and-map-HK-sample.sh ../mapping-files-HK ../mapping-files-HK/all-combined 4 A3-09-0m-34An "${R1_link}" "${R2_link}"
        
[Tue Nov  3 01:20:51 2020]
Finished job 224.
81 of 747 steps (11%) done

[Tue Nov  3 01:20:51 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_066_5m_0.22-3_prok.bam
    jobid: 228
    wildcards: ID=TARA_066_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_066_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_066_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 01:41:43 2020]
Finished job 226.
82 of 747 steps (11%) done

[Tue Nov  3 01:41:43 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_800m_0.22-3_prok.bam
    jobid: 242
    wildcards: ID=TARA_078_800m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_078_800m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_800m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 01:47:27 2020]
Finished job 395.
83 of 747 steps (11%) done

[Tue Nov  3 01:47:27 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_078_5m_0.45-0.8_girus.bam
    jobid: 326
    wildcards: ID=TARA_078_5m_0.45-0.8_girus


        curr_run_accs=$(grep -w -m 1 "^TARA_078_5m_0.45-0.8_girus" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_078_5m_0.45-0.8_girus ${curr_run_accs}
        
[Tue Nov  3 02:09:44 2020]
Finished job 227.
84 of 747 steps (11%) done

[Tue Nov  3 02:09:45 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_124_5m_0.45-0.8_girus.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-coverages.tsv
    jobid: 760
    wildcards: ID=TARA_124_5m_0.45-0.8_girus


        pileup.sh -in ../mapping-files/TARA_124_5m_0.45-0.8_girus.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-cov.tmp > ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-cov-and-det.tmp ../mapping-files/TARA_124_5m_0.45-0.8_girus-gene-cov.tmp
        
[Tue Nov  3 02:09:57 2020]
Finished job 760.
85 of 747 steps (11%) done

[Tue Nov  3 02:09:57 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/OSD175.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/OSD175-gene-coverages.tsv
    jobid: 424
    wildcards: ID=OSD175


        pileup.sh -in ../mapping-files/OSD175.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/OSD175-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/OSD175-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/OSD175-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/OSD175-gene-cov.tmp > ../mapping-files/OSD175-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/OSD175-gene-cov-and-det.tmp ../mapping-files/OSD175-gene-cov.tmp
        
[Tue Nov  3 02:10:05 2020]
Finished job 424.
86 of 747 steps (12%) done

[Tue Nov  3 02:10:05 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_128_40m_0.22-3_prok.bam
    jobid: 260
    wildcards: ID=TARA_128_40m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_128_40m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_128_40m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 02:10:43 2020]
Finished job 228.
87 of 747 steps (12%) done

[Tue Nov  3 02:10:43 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD103.bam
    jobid: 65
    wildcards: ID=OSD103


        curr_run_accs=$(grep -w -m 1 "^OSD103" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD103 ${curr_run_accs}
        
[Tue Nov  3 02:12:02 2020]
Finished job 65.
88 of 747 steps (12%) done

[Tue Nov  3 02:12:02 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD105.bam
    jobid: 64
    wildcards: ID=OSD105


        curr_run_accs=$(grep -w -m 1 "^OSD105" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD105 ${curr_run_accs}
        
[Tue Nov  3 02:13:40 2020]
Finished job 64.
89 of 747 steps (12%) done

[Tue Nov  3 02:13:40 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_128_5m_0.22-3_prok.bam
    jobid: 259
    wildcards: ID=TARA_128_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_128_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_128_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 03:24:24 2020]
Finished job 242.
90 of 747 steps (12%) done

[Tue Nov  3 03:24:24 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD106-0.bam
    jobid: 63
    wildcards: ID=OSD106-0


        curr_run_accs=$(grep -w -m 1 "^OSD106-0" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD106-0 ${curr_run_accs}
        
[Tue Nov  3 03:25:27 2020]
Finished job 63.
91 of 747 steps (12%) done

[Tue Nov  3 03:25:27 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_112_696m_0.22-3_prok.bam
    jobid: 258
    wildcards: ID=TARA_112_696m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_112_696m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_112_696m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 04:04:09 2020]
Finished job 326.
92 of 747 steps (12%) done

[Tue Nov  3 04:04:09 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_132_5m_0.22-3_prok.bam
    jobid: 261
    wildcards: ID=TARA_132_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_132_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_132_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 04:40:54 2020]
Finished job 260.
93 of 747 steps (12%) done

[Tue Nov  3 04:40:55 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD106-15.bam
    jobid: 62
    wildcards: ID=OSD106-15


        curr_run_accs=$(grep -w -m 1 "^OSD106-15" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD106-15 ${curr_run_accs}
        
[Tue Nov  3 04:42:06 2020]
Finished job 62.
94 of 747 steps (13%) done

[Tue Nov  3 04:42:07 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_112_155m_0.22-3_prok.bam
    jobid: 257
    wildcards: ID=TARA_112_155m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_112_155m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_112_155m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 04:53:25 2020]
Finished job 259.
95 of 747 steps (13%) done

[Tue Nov  3 04:53:25 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/OSD107.bam
    jobid: 61
    wildcards: ID=OSD107


        curr_run_accs=$(grep -w -m 1 "^OSD107" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 OSD107 ${curr_run_accs}
        
[Tue Nov  3 04:54:10 2020]
Finished job 61.
96 of 747 steps (13%) done

[Tue Nov  3 04:54:10 2020]
rule dl_sample_and_run_mapping:
    input: ../mapping-files/all-combined.1.bt2, ../mapping-files/all-combined.2.bt2, ../mapping-files/all-combined.3.bt2, ../mapping-files/all-combined.rev.1.bt2, ../mapping-files/all-combined.rev.2.bt2
    output: ../mapping-files/TARA_112_5m_0.22-3_prok.bam
    jobid: 256
    wildcards: ID=TARA_112_5m_0.22-3_prok


        curr_run_accs=$(grep -w -m 1 "^TARA_112_5m_0.22-3_prok" sample-and-run-accessions.tsv | cut -f 2)
        bash scripts/dl-and-map-sample.sh ../mapping-files ../mapping-files/all-combined 4 TARA_112_5m_0.22-3_prok ${curr_run_accs}
        
[Tue Nov  3 05:58:19 2020]
Finished job 258.
97 of 747 steps (13%) done

[Tue Nov  3 05:58:19 2020]
rule parse_gene_level_cov_and_det:
    input: ../mapping-files/TARA_078_800m_0.22-3_prok.bam, ../genes-and-annotations/all-genes.fa
    output: ../mapping-files/TARA_078_800m_0.22-3_prok-gene-coverages.tsv
    jobid: 656
    wildcards: ID=TARA_078_800m_0.22-3_prok


        pileup.sh -in ../mapping-files/TARA_078_800m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_078_800m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov.tmp
        
[Tue Nov  3 05:58:21 2020]
Error in rule parse_gene_level_cov_and_det:
    jobid: 656
    output: ../mapping-files/TARA_078_800m_0.22-3_prok-gene-coverages.tsv
    shell:
        
        pileup.sh -in ../mapping-files/TARA_078_800m_0.22-3_prok.bam fastaorf=../genes-and-annotations/all-genes.fa outorf=../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov-and-det.tmp > /dev/null 2>&1

        # filtering coverages based on detection
        grep -v "#" ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov-and-det.tmp | awk -F $'	' ' BEGIN {OFS=FS} { if ( $10 <= 0.5 ) $4 = 0 } { print $1,$4 } ' > ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov.tmp
        cat <( printf "gene_ID	coverage
" ) ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov.tmp > ../mapping-files/TARA_078_800m_0.22-3_prok-gene-coverages.tsv

          # removing intermediate files
        rm ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov-and-det.tmp ../mapping-files/TARA_078_800m_0.22-3_prok-gene-cov.tmp
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Tue Nov  3 06:05:59 2020]
Finished job 261.
98 of 747 steps (13%) done
[Tue Nov  3 06:51:00 2020]
Finished job 257.
99 of 747 steps (13%) done
[Tue Nov  3 06:57:25 2020]
Finished job 256.
100 of 747 steps (13%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /data2/mlee/Thaum/metagenome-dl-and-mapping-workflow/.snakemake/log/2020-11-02T103839.663047.snakemake.log
